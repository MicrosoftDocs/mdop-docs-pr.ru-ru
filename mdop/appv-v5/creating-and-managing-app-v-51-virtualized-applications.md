---
title: Создание виртуализированных приложений App-V 5.1 и управление ими
description: Создание виртуализированных приложений App-V 5.1 и управление ими
author: dansimp
ms.assetid: 26be4331-88eb-4cfb-9d82-e63d7ee54576
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 207529fb5d5333694d31a82f44f08b35513dd4d4
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10814688"
---
# Создание виртуализированных приложений App-V 5.1 и управление ими


После того, как приложение Microsoft Application Virtualization (App-V) 5,1 правильно развернуто, вы можете использовать его для отслеживания и записи процесса установки и настройки приложения, которое должно выполняться как виртуализированное приложение.

**Примечание**  Дополнительные сведения о настройке секвенсора App-V 5,1, рекомендации по упорядочиванию и примеры создания и обновления виртуального приложения можно найти в [руководстве по виртуализации приложений Microsoft applications 5,0](https://download.microsoft.com/download/F/7/8/F784A197-73BE-48FF-83DA-4102C05A6D44/App-V%205.0%20Sequencing%20Guide.docx).

**Примечание** Секвенсор App-V 5. x не может последовательностей в приложениях с именами, соответствующими "CO_ &lt; x &gt; ", где x — любая цифра. Будет сгенерировано сообщение об ошибке 0x8007139F.

## Упорядочение приложения


Секвенсор App-V 5,1 можно использовать для выполнения следующих задач:

-   Создавайте виртуальные пакеты, которые можно развертывать на компьютерах, на которых запущен клиент App-V 5,1.

-   Обновление существующих пакетов. Вы можете развернуть существующий пакет на компьютере с запущенным секвенсором, а затем обновить приложение, чтобы создать новую версию.

-   Изменить параметры конфигурации, связанные с существующим пакетом. Например, вы можете добавить ярлык или изменить сопоставление типов файлов.

    **Примечание**  Для обеспечения роуминга необходимо создать ярлыки и сохранить их в доступном месте в сети. Если ярлык создан и сохранен в частном расположении, пакет должен быть опубликован локально на компьютере с клиентским приложением App-V 5,1.
 
-   Преобразуйте существующие виртуальные пакеты.

Секвенсор использует каталог **% tmp% \** \ или **% TEMP% \ \** **и временный каталог для** хранения временных файлов в процессе упорядочения. На компьютере, на котором запущена программа Sequencer, необходимо настроить эти каталоги на свободное место на диске, чтобы оценить требования к установке приложения. Настройка временных папок и временного каталога в разных разделах жесткого диска поможет повысить производительность при выполнении виртуализации.

При использовании секвенсора для создания нового виртуального приложения создаются указанные ниже файлы. Эти файлы состоят из пакета App-V 5,1.

-   MSI-файл. Этот файл установщика Windows (MSI) создается программой Sequencer и используется для установки виртуального пакета на целевые компьютеры.

-   Report.xml файл. В этом файле секвенсор сохраняет все проблемы, предупреждения и ошибки, обнаруженные во время последовательности. После создания пакета отображаются сведения о нем. Вы можете получить этот отчет для диагностики и устранения неполадок.

-   файл. AppV. Это виртуальный файл приложения.

-   Файл конфигурации развертывания. Файл конфигурации развертывания определяет, как виртуальное приложение будет развернуто на конечных компьютерах.

-   Файл конфигурации пользователя. Файл конфигурации пользователя определяет, как виртуальное приложение будет выполняться на конечных компьютерах.

**Важно!**  Вы должны настроить папки% TMP% и% TEMP%, которые используются преобразователем пакетов, чтобы быть безопасным расположением и каталогом. Безопасное расположение доступно только администратору. Кроме того, при последовательном указании пакета необходимо сохранить пакет в безопасном расположении или убедиться в том, что в процессе преобразования и мониторинга никто из пользователей не может войти в систему. 

Диалоговое окно " **Параметры** " на консоли "секвенсор" имеет следующие вкладки:

-   **Общие**. На этой вкладке можно включить Запуск обновлений Майкрософт во время виртуализации. Выберите команду **Добавить версию пакета в поле имя файла** , чтобы настроить последовательность для добавления номера версии виртуализированному пакету, для которого выполняется упорядочение. Выберите **всегда доверять источнику ускорителей пакетов** для создания виртуализованных пакетов с помощью ускорителя пакетов без запроса на авторизацию.

    **Важно!**  Акселераторы пакетов, созданные с помощью App-V 4.6, не поддерживаются приложением App-V 5,1.     

-   **Анализ элементов**. На этой вкладке отображаются связанные расположения путей к файлам, которые будут анализироваться или размечены в виртуальной среде. Маркеры полезны при добавлении файлов с помощью вкладки **файлы пакетов** в режиме **расширенного редактирования**.

-   **Исключаемые элементы**. На этой вкладке можно указать, в каких папках и каталогах не следует наблюдать при выполнении последовательностей. Чтобы добавить данные локальных приложений, сохраненных в локальной папке данных приложения в пакете, нажмите **создать** и укажите расположение и связанный **тип сопоставления**. Этот параметр является обязательным для некоторых пакетов.

Приложение App-V 5,1 поддерживает приложения, которые включают службы Microsoft Windows. Если приложение содержит службу Windows, она будет включена в упорядоченный виртуальный пакет, если он установлен в процессе наблюдения секвенсором. Если виртуальное приложение создает службу Windows при первоначальном запуске, а затем позднее после установки, необходимо запустить приложение, когда секвенсор находится в наблюдении, чтобы служба Windows была добавлена в пакет. Поддерживаются только службы, которые выполняются под учетной записью Local System. Службы, настроенные для автозапуска или отложенного автозапуска, запускаются перед тем, как первое виртуальное приложение в пакете выполняется внутри виртуальной среды пакета. Службы Windows, настроенные для запуска по запросу приложения, запускаются, когда виртуальное приложение в пакете запускает службу через вызов API.

[Виртуализация нового приложения с помощью App-V 5.1](how-to-sequence-a-new-application-with-app-v-51-beta-gb18030.md)

## <a href="" id="---------app-v-5-1-shell-extension-support"></a> Поддержка расширений оболочки App-V 5.1


Приложение App-V 5.1 поддерживает расширения оболочки. Расширения оболочки будут обнаружены и внедрены в пакет во время последовательности.

Расширения оболочки встраиваются в пакет автоматически в процессе упорядочивания. При публикации пакета расширение оболочки предоставляет пользователям те же функциональные возможности, что и при локальном установлении приложения.

**Требования для использования расширений оболочки:**

-   Пакеты, содержащие внедренные расширения оболочки, должны быть опубликованы глобально. Для включения функций расширения оболочки приложению не требуется дополнительная настройка или Настройка клиента.

-   "Разрядность" приложения, секвенсора и клиента App-V должны совпадать, или расширения оболочки не работают. Пример

    -   Версия приложения — 64-разр.

    -   Секвенсор выполняется на 64-разрядном компьютере.

    -   Пакет доставляется на клиентский компьютер App-V 64-bit.

В таблице ниже перечислены поддерживаемые расширения оболочки.

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Обработчик</th>
<th align="left">Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>Обработчик контекстного меню</p></td>
<td align="left"><p>Добавляет элементы меню в контекстное меню. Вызывается перед отображением контекстного меню.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Обработчик перетаскивания</p></td>
<td align="left"><p>Управляет действием, которое можно щелкнуть правой кнопкой мыши, перетащить и изменить появившееся контекстное меню.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Целевой обработчик перетаскивания</p></td>
<td align="left"><p>Управляет действием после того, как объект данных перетаскивается и отбрасывается по направлению перетаскивания, например файлу.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Обработчик объектов данных</p></td>
<td align="left"><p>Управляет действием после того, как файл копируется в буфер обмена или перетаскивается и удаляется по направлению перетаскивания. Он может предоставлять дополнительные форматы буфера обмена для целевого объекта перетаскивания.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Обработчик страницы свойств</p></td>
<td align="left"><p>Заменяет или добавляет страницы в диалоговое окно "страница свойств" объекта.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Обработчик всплывающих подсказк</p></td>
<td align="left"><p>Позволяет получать сведения о флагах и всплывающих подсказках для элемента и отображать их в всплывающей подсказке при наведении указателя мыши.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Обработчик столбцов</p></td>
<td align="left"><p>Позволяет создавать и отображать пользовательские столбцы в <strong> представлении "сведения" в проводнике Windows </strong> . Его можно использовать для расширенной сортировки и группировки.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Обработчик просмотра</p></td>
<td align="left"><p>Обеспечивает предварительный просмотр файла, который будет отображаться в области предварительного просмотра в проводнике Windows.</p></td>
</tr>
</tbody>
</table>

## Поддержка добавочных копий файлов при записи (CoW)

Файлы в расширениях CoW позволяют App-V 5,1 динамически вносить записи в определенные расположения, содержащиеся в виртуальном пакете во время использования.

В следующей таблице показаны типы файлов, которые могут существовать в виртуальном пакете в каталоге VFS, но их невозможно обновить на компьютере, на котором запущен клиент App-V 5,1. Любые другие файлы и каталоги можно изменить.

| Тип файла     |               |               |               |               |               |
|------------   |-------------  |-------------  |------------   |------------   |------------   |
| . ACM          | . ASA          | .asp          | . aspx         | . AX           | .bat          |
| .cer          | .chm          | . распределения загрузки          | .cmd          | .cnt          | .cnv          |
| .com          | .cpl          | .cpx          | .crt          | .dll          | .drv          |
| . ESC          | .exe          | .fon          | .grp          | .hlp          | .hta          |
| . IME          | INF          | INS          | .isp          | . его          | .js           |
| .jse          | .lnk          | .msc          | .msi          | .msp          | .mst          |
| MUI          | . NLS          | .ocx          | PAL          | .pcd          | .pif          |
| .reg          | .scf          | .scr          | .sct          | .shb          | .shs          |
| .sys          | TLB          | . TSP          | .url          | .vb           | .vbe          |
| .vbs          | .vsmacros     | .ws           | .wsf          | .wsh          |               |


## Изменение существующего пакета виртуальных приложений


С помощью секвенсора можно изменить существующий пакет. Компьютер, на котором вы выполняете это действие, должен соответствовать архитектуре микросхемы компьютера, который использовался для создания приложения. Например, при первоначальном упорядочении пакета с помощью компьютера, работающего под управлением 64-разрядной операционной системы, необходимо изменить пакет с помощью компьютера, работающего под управлением 64-разрядной операционной системы.

[Изменение существующего пакета виртуального приложения](how-to-modify-an-existing-virtual-application-package-51.md)

## Создание шаблона проекта


Appvt-файл — это шаблон проекта, который можно использовать для сохранения часто применяемых, настраиваемых параметров. Вы можете использовать эти параметры для будущих последовательностей.

Шаблоны проектов App-V 5,1 отличаются от ускорителей приложений App-V 5,1, так как для App-V 5,1 акселераторы приложений и шаблоны проектов App-V 5,1 можно применять к нескольким приложениям. Кроме того, шаблон проекта нельзя использовать для создания виртуального пакета приложения, если вы используете ускоритель пакетов. Следующие общие параметры сохраняются в шаблоне проекта App-V 5,1:

В шаблоне можно указать и сохранить несколько параметров, как описано ниже.

-   **Дополнительные параметры наблюдения**. Включение функции центра обновления Майкрософт во время наблюдения. Сохранение разрешающей локальной настройки параметров взаимодействия

-   **Общие параметры**. Позволяет использовать **установщик Windows**, **добавлять версию пакета в имя файла**.

-   **Исключаемые элементы.** Содержащий список шаблонов исключений.

[Создание и использование шаблона проекта](how-to-create-and-use-a-project-template51.md)

## Создание ускорителя пакетов


**Примечание**  Ускорители пакетов, созданные с помощью более ранней версии App-V, должны быть созданы повторно с помощью App-V 5,1.

Вы можете использовать ускорители пакетов App-V 5,1 для автоматического создания новых пакетов виртуальных приложений. После того как вы успешно создадите ускоритель пакетов, вы можете повторно использовать ускоритель пакетов и предоставить к нему общий доступ.

В некоторых случаях для создания ускорителя пакетов может потребоваться установить локальное приложение на компьютере, на котором запущен секвенсор. В таких случаях следует сначала попытаться создать ускоритель пакетов с помощью установочного носителя. Если требуется несколько отсутствующих файлов, необходимо установить приложение локально на компьютер, на котором работает секвенсор, а затем создать ускоритель пакетов.

После того как вы успешно создадите ускоритель пакетов, вы можете повторно использовать ускоритель пакетов и предоставить к нему общий доступ. Создание ускорителей пакетов для App-V 5,1 является сложной задачей. Ускорители пакетов могут содержать пароль и сведения для определенного пользователя. Поэтому вы должны сохранить ускорители пакетов и связанный установочный носитель в безопасном расположении, и вы должны добавить цифровую подпись ускорителя пакетов после его создания, чтобы издатель мог быть проверен при применении ускорителя приложений App-V 5,1.

[Как создать акселератор пакетов](how-to-create-a-package-accelerator51.md)

[Создание пакета виртуального приложения с помощью ускорителя пакетов App-V](how-to-create-a-virtual-application-package-using-an-app-v-package-accelerator51.md)

## Отчеты об ошибках секвенсора


Программа Sequencer App-V 5,1 может определять распространенные проблемы, связанные с упорядочиванием, в процессе выполнения последовательности. На странице **отчета об установке** в конце мастера последовательностей отображаются диагностические сообщения, отнесенные на **ошибки**, **предупреждения**и **сведения** в зависимости от серьезности проблемы.

Кроме того, вы можете найти дополнительные сведения об ошибках, связанные с последовательностью, с помощью средства просмотра событий Windows.


## <a href="" id="other-resources-for-the-app-v-5-1-sequencer-"></a>Другие ресурсы для секвенсора App-V 5,1


-   [Операции, связанные с администрированием и использованием App-V 5.1](operations-for-app-v-51.md)

