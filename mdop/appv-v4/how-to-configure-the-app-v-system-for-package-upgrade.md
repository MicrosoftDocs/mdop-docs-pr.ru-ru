---
title: Настройка системы App-V для обновления пакетов
description: Настройка системы App-V для обновления пакетов
author: dansimp
ms.assetid: de133898-f887-46c1-9bc9-fbb03feac66a
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 5e5056f923c61aff39d9bd6e1d26f071177f7c12
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10817849"
---
# Настройка системы App-V для обновления пакетов


При развертывании новой версии существующего пакета приложения, которая была обновлена в секвенсоре App-V, вы можете развернуть ее, чтобы клиенты App-V автоматически переводили поток новой версии в локальный кэш. В зависимости от используемого потокового решения существуют различные процедуры для настройки обновления пакета. В следующих разделах описаны наиболее распространенные сценарии публикации и потоковой передачи данных, а также приведены процедуры, необходимые для настройки обновления пакета для каждого сценария.

## Использование сервера управления как для публикации, так и для потоковой передачи


В этом сценарии один сервер управления App-V используется как для публикации, так и для потоковой передачи пакетов и приложений, а требуется протокол RTSP (S). После импорта исходного пакета на сервер управления App-V администратор копирует папку пакета, содержащую файлы, созданные секвенсором, в папку содержимого (например, в \\\\server\\CONTENT\\packagename.). Администратор также редактирует элемент HREF в OSD, указывающий на файл SFT в папке Package, а затем импортирует пакет на сервер.

Когда пользователь проходит проверку подлинности на сервере управления, сервер публикует приложения пользователя, отправляя файл applist.xml клиенту. Затем клиент извлекает из сервера управления OSD файлы и значки для приложений. Когда пользователь дважды щелкает значок приложения, содержимое приложения передается в кэш клиента из пути, указанного в OSD-файле, и запускается приложение.

### Обновление пакета

Чтобы добавить новую версию приложения, которая была обновлена в секвенсоре App-V, администратор должен скопировать новый файл SFT и другие измененные файлы в ту же папку, что и исходная версия приложения. Затем администратор сможет добавить новую версию пакета с помощью **надстройки "добавить версию** " на консоли управления сервером.

Когда пользователь затем запускает приложение, сервер автоматически отправляет клиенту новую версию. Этот конкретный метод обновления пакета ранее назывался активным обновлением.

## Использование сервера управления для публикации и потокового сервера для потоковой передачи


В этом сценарии сервер управления App-V используется для публикации пакетов, а потоковый сервер используется для потоковой передачи и приложений. Требуется протокол RTSP (S). После импорта исходного пакета на сервер управления администратор скопирует папку пакета, содержащую файлы, созданные секвенсором, в папку содержимого (например, в \\\\server\\CONTENT\\packagename.). Администратор редактирует элемент HREF в OSD, указывающий на файл SFT на потоковый сервер, а затем импортирует пакет на сервер управления.

Чтобы настроить сервер потоковой передачи, администратор копирует папку пакета с сервера управления в папку содержимого на потоковый сервер. Эта папка должна иметь то же имя и относительный путь в папке содержимого сервера потоков, как на сервере управления, например \\\\streamingserver\\CONTENT\\packagename.

Если параметр корневого каталога приложения клиента (ASR) настроен таким образом, что он указывает на потоковый сервер, клиент использует этот параметр вместо имени сервера в записи HREF в OSD-файле. Поля ISR и OSR в клиенте можно настроить так, чтобы они указывали либо на сервер управления, либо на потоковый сервер, в зависимости от используемой архитектуры системы.

Когда пользователь проходит проверку подлинности на сервере управления, сервер публикует приложения пользователя, отправляя файл applist.xml клиенту. Клиент извлекает OSD файлы и значки для приложений с сервера потоковой передачи или сервера управления, в зависимости от параметров в полях OSR и ISR.

Когда пользователь дважды щелкает значок приложения, клиент использует путь к файлу содержимого пакета (SFT), который содержится в элементе HREF файла OSD. Если используется ASR-сервер, клиент заменяет имя сервера (а также порт и протокол, если оно используется) в элементе HREF, указав путь к потоку, указанному в ASR. Затем приложение передается из потокового сервера в клиентский кэш и запускается.

### Обновление пакета

Чтобы добавить новую версию приложения, которая была обновлена в секвенсоре App-V, администратор должен скопировать новую версию файла SFT и других измененных файлов в ту же папку, в которой находится исходная версия приложения, на потоковый сервер.

Для обеспечения единообразия рекомендуется скопировать новые файлы в папку на сервере управления. В частности, если вы используете поля OSR или ISR клиента, скопируйте обновленный файл OSD и значки на сервер, указанный в полях OSR и ISR.

После того как потоковый сервер обнаружит новую версию, в следующий раз, когда пользователь запустит приложение, сервер автоматически отправляет клиенту новую версию.

## Использование сервера управления для публикации и сервера IIS для потоковой передачи


В этом сценарии сервер управления App-V используется для публикации пакетов, а сервер IIS используется для потоковой передачи и приложений. После импорта исходного пакета на сервер управления администратор скопирует папку пакета, содержащую файлы, созданные секвенсором, в папку содержимого (например, в \\\\server\\CONTENT\\packagename.). Администратор редактирует элемент HREF в OSD, чтобы он указывал на SFT – файл на сервере IIS, и затем импортирует пакет на сервер управления.

Чтобы настроить сервер IIS для потоковой передачи, администратор копирует папку пакета с сервера управления в папку содержимого на сервере IIS. Эта папка должна иметь то же имя и относительный путь в папке веб-содержимого сервера IIS, как на сервере управления; Например, можно получить доступ к URL-адресу на сервере IIS с помощью http://IISserver/CONTENT/packagename или https://IISserver/CONTENT/packagename .

Если параметр корневого каталога приложения клиента (ASR) установлен так, чтобы он указывал на сервер IIS, клиент использует ASR, а не имя сервера в записи HREF в OSD-файле. Вы можете дополнительно настроить поля ISR и OSR на клиенте, чтобы указать либо сервер управления, либо сервер IIS, в зависимости от конкретной архитектуры системы, которую вы используете.

Когда сервер управления выполняет проверку подлинности пользователя, сервер публикует приложения пользователя, отправляя файл applist.xml клиенту. Клиент извлекает OSD файлы и значки для приложений с сервера IIS или сервера управления, в зависимости от параметров в полях ISR и OSR.

Когда пользователь дважды щелкает значок приложения, клиент использует путь к файлу содержимого пакета (SFT), который содержится в элементе HREF файла OSD. Если используется ASR-сервер, клиент заменяет имя сервера (а также порт и протокол, если оно используется) в элементе HREF, указав путь к серверу IIS, указанному в ASR. Затем приложение передается из сервера IIS в кэш клиента с помощью протокола HTTP (S) и запускается.

### Обновление пакета

Процедура обновления пакета описана ниже.

-   Скопируйте новую версию OSD-файла в папку исходной версии в папке содержимого сервера управления, например \\\\server\\CONTENT\\packagename, и замените существующий OSD-файл. Для обеспечения единообразия скопируйте также и другие файлы, которые были изменены. Если используются поля OSR и ISR клиента, скопируйте обновленный файл OSD и значки на сервер, указанный в полях OSR и ISR.

-   Скопируйте новую версию SFT-файла в папку Package в папке "содержимое" на сервере IIS. Например, можно получить доступ к URL-адресу на сервере IIS с помощью http://IISserver/CONTENT/packagename или https://IISserver/CONTENT/packagename .

При следующем обновлении публикации клиент обновится с помощью новой версии OSD файла. Этот файл теперь указывает на новую версию SFT файла; Таким образом, когда пользователь дважды щелкает значок приложения, запускается новая версия.

## Использование сервера управления для публикации и общего доступа к файлам для потоковой передачи


В этом сценарии сервер управления App-V используется для публикации пакетов, а файловый сервер используется для потоковой передачи и приложений. После импорта исходного пакета на сервер управления администратор скопирует папку пакета, содержащую файлы, созданные секвенсором, в папку содержимого (например, в \\\\server\\CONTENT\\packagename.). Администратор редактирует элемент HREF в OSD, чтобы он указывал на файл SFT на файловом сервере, и импортирует пакет на сервер управления.

Чтобы настроить файловый сервер для потоковой передачи, администратор копирует папку пакета с сервера управления в папку содержимого на файловом сервере. Эта папка должна иметь то же имя и относительный путь в папке содержимого файлового сервера, как на сервере управления, например \\\\fileserver\\CONTENT\\packagename.

Если параметр корневого каталога приложения (ASR) клиента настроен таким образом, чтобы он указывал на файловый сервер, используя путь UNC (например, \\\\fileserver\\content), клиент использует этот параметр вместо имени сервера в записи HREF в OSD-файле. Администратор может при необходимости настроить поля ISR и OSR на клиенте, чтобы указать либо сервер управления, либо файловый сервер в зависимости от используемой архитектуры системы.

Когда сервер управления выполняет проверку подлинности пользователя, сервер публикует приложения пользователя, отправляя файл applist.xml клиенту. Клиент извлекает OSD файлы и значки для приложений с сервера файлов или управления, в зависимости от параметров в полях ISR и OSR.

Когда пользователь дважды щелкает значок приложения, клиент использует путь к файлу содержимого пакета (SFT), который содержится в элементе HREF файла OSD. Если используется ASR, клиент заменяет имя сервера (а также порт и протокол, если оно используется) в элементе HREF, указав путь к файлу сервера, указанному в ASR. Затем приложение передается из кэша файлов на клиентский кэш и запускается.

### Обновление пакета

Процедура обновления пакета описана ниже.

-   Скопируйте новую версию OSD-файла в папку исходной версии в папке содержимого сервера управления (например, \\\\server\\CONTENT\\packagename, заменив существующий OSD-файл). Кроме того, для обеспечения согласованности также нужно скопировать любые другие измененные файлы. Если используются поля OSR и ISR клиента, скопируйте обновленный файл OSD и значки на сервер, указанный в полях OSR и ISR.

-   Скопируйте новую версию SFT файла в папку Package в папке "содержимое" на файловом сервере (например, \\\\fileserver\\CONTENT\\packagename.). Скопируйте SFT – файл версии 2 в папку, расположенную под общим КОНТЕНТом на файловом сервере, например \\\\fileserver\\CONTENT\\packagename\\V1.

При следующем обновлении публикации клиент обновится с помощью новой версии OSD файла. Этот файл теперь указывает на новую версию SFT-файла, поэтому при следующем двойном щелчке по значку приложения запускается новая версия.

## Обновление пакета с помощью потокового режима MSI


При создании файла установщика Windows (MSI) во время виртуализации пакета секвенсор создает файл. MSI-файл, содержащий все необходимые сведения о публикации. Администратор должен скопировать. MSI-файл для клиента и. SFT-файл, содержащий содержимое пакета, к общему сетевому доступу, доступному на клиентском компьютере.

Чтобы опубликовать приложение на клиентском компьютере, выполните следующую команду:

   **Msiexec.exe/i \\\\PathToMsi\\packagename.msi MODE = STREAMing OVERRIDEURL = \\\\\\\\server\\share\\package.SFT**

С. MSI-файл публикует приложения для клиента, а затем создает поток. SFT файла в клиентский кэш.

### Обновление пакета

Чтобы добавить новую версию, администратор должен развернуть новый. MSI-файла на клиент и новый. SFT файла в сетевую общую сеть. Администратор должен выполнить ту же команду, которая использовалась для развертывания пакета, но использовать новый. MSI-файл и новый. Файл SFT, например:

   **Msiexec.exe/i \\\\PathToMsi\\packagename\_2.msi MODE = STREAMing OVERRIDEURL = \\\\\\\\server\\share\\package\_2.SFT**

 

 





