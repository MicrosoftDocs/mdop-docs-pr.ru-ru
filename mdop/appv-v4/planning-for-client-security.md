---
title: Планирование безопасности клиента
description: Планирование безопасности клиента
author: dansimp
ms.assetid: 4840a60f-4c91-489c-ad0b-6671882abf9b
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: e0038f7cbc8592d6c7fcdfa485111da88c17791d
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10815932"
---
# <span data-ttu-id="c9005-103">Планирование безопасности клиента</span><span class="sxs-lookup"><span data-stu-id="c9005-103">Planning for Client Security</span></span>


<span data-ttu-id="c9005-104">Клиент App-V предлагает несколько улучшений системы безопасности, которые отсутствовали в предыдущих версиях продукта.</span><span class="sxs-lookup"><span data-stu-id="c9005-104">The App-V Client provides several security enhancements that were not present in previous versions of the product.</span></span> <span data-ttu-id="c9005-105">Эти изменения обеспечивают повышенную безопасность после установки и более поздней конфигурации параметров клиента.</span><span class="sxs-lookup"><span data-stu-id="c9005-105">These changes provide improved security after installation and through later configuration of the client settings.</span></span> <span data-ttu-id="c9005-106">В этой статье описаны некоторые из этих улучшений и указаны некоторые важные параметры конфигурации, связанные с безопасностью, которые следует учитывать во время процесса планирования.</span><span class="sxs-lookup"><span data-stu-id="c9005-106">This topic describes some of those enhancements and identifies several important security-related configuration settings that you should consider during your planning process.</span></span> <span data-ttu-id="c9005-107">Важно помнить о том, что виртуальные приложения все еще находятся в исполняемых файлах, поэтому вы должны убедиться, что эти ресурсы не могут быть подделаны неавторизованными людьми.</span><span class="sxs-lookup"><span data-stu-id="c9005-107">It is important to remember that virtual applications are still executables, so you must ensure that these assets cannot be tampered with by unauthorized people.</span></span> <span data-ttu-id="c9005-108">По этой причине кэш файлов Open Software descriptor (OSD) защищается, как описано далее в этой статье, и мы настоятельно рекомендуем использовать протоколы RTSP, HTTPS и IPsec для защиты публикации и потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="c9005-108">For this reason, the Open Software Descriptor (OSD) file cache is protected as described later in this topic, and we strongly recommend that you use RTSPS, HTTPS, and IPsec to protect publishing and streaming.</span></span>

## <span data-ttu-id="c9005-109">Безопасность клиента App-V</span><span class="sxs-lookup"><span data-stu-id="c9005-109">App-V Client Security</span></span>


<span data-ttu-id="c9005-110">По умолчанию во время установки клиент App-V настраивается с минимальными разрешениями, необходимыми для того, чтобы пользователь мог выполнять обновление публикации и запускать приложения.</span><span class="sxs-lookup"><span data-stu-id="c9005-110">By default, at installation the App-V client is configured with the minimum permissions required to allow a user to perform a publishing refresh and to start applications.</span></span> <span data-ttu-id="c9005-111">Ниже перечислены другие усовершенствования системы безопасности, доступные в клиенте App-V.</span><span class="sxs-lookup"><span data-stu-id="c9005-111">Other security enhancements provided in the App-V client include the following:</span></span>

-   <span data-ttu-id="c9005-112">По умолчанию кэш OSD файлов может быть обновлен только администраторами и с помощью процесса обновления публикации.</span><span class="sxs-lookup"><span data-stu-id="c9005-112">By default, the OSD file cache can be updated only by administrators and by using the publishing refresh process.</span></span>

-   <span data-ttu-id="c9005-113">Файл журнала (sftlog.txt) доступен только для учетных записей, которые имеют локальный административный доступ к клиенту.</span><span class="sxs-lookup"><span data-stu-id="c9005-113">The log file (sftlog.txt) is accessible only by accounts with local administrative access to the client.</span></span>

-   <span data-ttu-id="c9005-114">Файл журнала теперь имеет максимальный размер.</span><span class="sxs-lookup"><span data-stu-id="c9005-114">The log file now has a maximum size.</span></span>

### <span data-ttu-id="c9005-115">Сопоставления типов файлов</span><span class="sxs-lookup"><span data-stu-id="c9005-115">File Type Associations</span></span>

<span data-ttu-id="c9005-116">По умолчанию при установке клиента регистрируются сопоставления типов файлов (FTAs) для OSD-файлов, которые позволяют пользователям запускать приложения непосредственно из OSD-файлов, а не с помощью опубликованных сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="c9005-116">By default, the installation of the client registers file type associations (FTAs) for OSD files, which enables users to start applications directly from OSD files instead of the published shortcuts.</span></span> <span data-ttu-id="c9005-117">Если пользователь с правами локального администратора получает OSD-файл, который содержит вредоносный код, либо в сообщении электронной почты, либо загружается с сайта, пользователь может открыть файл OSD и запустить приложение, даже если клиент настроен для ограничения разрешения на **Добавление приложения** .</span><span class="sxs-lookup"><span data-stu-id="c9005-117">If a user with local administrator rights receives an OSD file containing malicious code, either in e-mail or downloaded from a Web site, the user can open the OSD file and start the application even if the client has been set to restrict the **Add Application** permission.</span></span> <span data-ttu-id="c9005-118">Вы можете отменить регистрацию FTAs для OSD, чтобы снизить этот риск.</span><span class="sxs-lookup"><span data-stu-id="c9005-118">You can unregister the FTAs for the OSD to reduce this risk.</span></span> <span data-ttu-id="c9005-119">Кроме того, можно заблокировать это расширение в почтовой системе и брандмауэре.</span><span class="sxs-lookup"><span data-stu-id="c9005-119">Also, consider blocking this extension in the e-mail system and at the firewall.</span></span> <span data-ttu-id="c9005-120">Дополнительные сведения о том, как настроить Outlook для блокировки расширений, приведены в разделе <https://go.microsoft.com/fwlink/?LinkId=133278> .</span><span class="sxs-lookup"><span data-stu-id="c9005-120">For more information about configuring Outlook to block extensions, see <https://go.microsoft.com/fwlink/?LinkId=133278>.</span></span>

**<span data-ttu-id="c9005-121">Примечание о безопасности.</span><span class="sxs-lookup"><span data-stu-id="c9005-121">Security Note:</span></span>**

<span data-ttu-id="c9005-122">Начиная с версии App-V 4.6, для файлов OSD больше не создается ассоциация типа файлов во время новой установки клиента, однако существующие параметры будут сохраняться при обновлении версии 4,2 или 4,5 клиента App-V.</span><span class="sxs-lookup"><span data-stu-id="c9005-122">Starting with App-V version4.6, the file type association is no longer created for OSD files during a new installation of the client, although the existing settings will be maintained during an upgrade from version 4.2 or 4.5 of the App-V client.</span></span> <span data-ttu-id="c9005-123">Если по какой бы причине вам нужно создать ассоциацию типа файла, вы можете создать следующие разделы реестра и задать их значения, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="c9005-123">If for any reason it is essential to create the file type association, you can create the following registry keys and set their values as shown:</span></span>

    Create HKEY\_CLASSES\_ROOT\\.osd with a default value of SoftGrid.osd.File

    Under HKEY\_LOCAL\_MACHINE\\software\\classes\\Softgrid.osd.file, create a string value named AppUserModelID with a data value of Microsoft.AppV.Client.Tray

### <span data-ttu-id="c9005-124">Authorization</span><span class="sxs-lookup"><span data-stu-id="c9005-124">Authorization</span></span>

<span data-ttu-id="c9005-125">Во время установки можно использовать параметр **RequireAuthorizationIfCached** , чтобы настроить клиент для использования авторизации на сервере при попытке пользователя запустить приложение.</span><span class="sxs-lookup"><span data-stu-id="c9005-125">During installation, you can use the **RequireAuthorizationIfCached** parameter to configure the client to require authorization from the server when the user tries to start an application.</span></span> <span data-ttu-id="c9005-126">Вы должны быть внимательны, как установить этот параметр.</span><span class="sxs-lookup"><span data-stu-id="c9005-126">You should consider carefully how to set this parameter.</span></span> <span data-ttu-id="c9005-127">Если сервер App-V недоступен по какой-либо причине, приложение будет использовать последнее сохраненное состояние этого параметра для управления доступом пользователей к приложению.</span><span class="sxs-lookup"><span data-stu-id="c9005-127">If the App-V server is unavailable for any reason, the application will use the most recent stored state of this parameter to control user access to the application.</span></span> <span data-ttu-id="c9005-128">Если пользователь не запустил приложение, прежде чем сервер App-V станет недоступен, они не смогут запустить приложение, пока они не смогут связаться с сервером и получить авторизацию.</span><span class="sxs-lookup"><span data-stu-id="c9005-128">If the user has not launched the application successfully before the App-V server becomes unavailable, they will not be able to launch the application until they can communicate with the server and receive authorization.</span></span> <span data-ttu-id="c9005-129">Однако если настроить параметр таким образом, чтобы клиенту не требовалось авторизация и если сервер недоступен, все ранее кэшированные приложения могут быть запущены независимо от того, разрешены ли они.</span><span class="sxs-lookup"><span data-stu-id="c9005-129">However, if you set the parameter so that the client does not require authorization and if the server is unavailable, all previously cached applications can be started whether authorized or not.</span></span> <span data-ttu-id="c9005-130">Кроме того, если у пользователя есть разрешение на изменение клиента для работы в автономном режиме через разрешения или если пользователь является локальным администратором, пользователь сможет открыть все кэшированные пакеты так, как если бы инфраструктура App-V была недоступна.</span><span class="sxs-lookup"><span data-stu-id="c9005-130">Also, if the user has permission to change the client to Work Offline mode through permissions or if the user is a local administrator, the user would be able to open all cached packages as if the App-V infrastructure was unavailable.</span></span>

### <span data-ttu-id="c9005-131">Проверка антивирусной программы</span><span class="sxs-lookup"><span data-stu-id="c9005-131">Antivirus Scanning</span></span>

<span data-ttu-id="c9005-132">Антивирусные программы, запущенные на клиентском компьютере App-V, могут обнаружить зараженный файл в виртуальной среде и сообщить о нем.</span><span class="sxs-lookup"><span data-stu-id="c9005-132">Antivirus software running on an App-V Client computer can detect and report an infected file in the virtual environment.</span></span> <span data-ttu-id="c9005-133">Однако он не может disinfect файл.</span><span class="sxs-lookup"><span data-stu-id="c9005-133">However, it cannot disinfect the file.</span></span> <span data-ttu-id="c9005-134">При обнаружении вируса в виртуальной среде антивирусная программа будет выполнять настроенную операцию карантина или восстановления в кэше, а не в фактическом пакете.</span><span class="sxs-lookup"><span data-stu-id="c9005-134">If a virus is detected in the virtual environment, the antivirus software would perform the configured quarantine or repair operation in the cache, not in the actual package.</span></span> <span data-ttu-id="c9005-135">Настройка антивирусной программы с исключением для файла Sftfs. fsd.</span><span class="sxs-lookup"><span data-stu-id="c9005-135">Configure the antivirus software with an exception for the sftfs.fsd file.</span></span> <span data-ttu-id="c9005-136">Этот файл является файлом кэша, в котором хранятся пакеты в клиенте App-V.</span><span class="sxs-lookup"><span data-stu-id="c9005-136">This file is the cache file that stores packages on the App-V Client.</span></span>

**<span data-ttu-id="c9005-137">Примечание о безопасности.</span><span class="sxs-lookup"><span data-stu-id="c9005-137">Security Note:</span></span>**

<span data-ttu-id="c9005-138">При обнаружении вируса в приложении или пакете, развернутом в рабочей среде, замените приложение или пакет с помощью бесплатной антивирусной версии.</span><span class="sxs-lookup"><span data-stu-id="c9005-138">If a virus is detected in an application or package deployed in the production environment, replace the application or package with a virus-free version.</span></span>

## <span data-ttu-id="c9005-139">Связь между клиентом и сервером</span><span class="sxs-lookup"><span data-stu-id="c9005-139">Communication Between Client and Server</span></span>


<span data-ttu-id="c9005-140">Обновления публикации и потоковая передача пакетов — это также разделы, в которых важны вопросы безопасности, связанные с обменом данными между клиентом и сервером.</span><span class="sxs-lookup"><span data-stu-id="c9005-140">Publishing refreshes and package streaming are also areas where security considerations relating to client-server communication are important.</span></span>

### <span data-ttu-id="c9005-141">Обновление публикации</span><span class="sxs-lookup"><span data-stu-id="c9005-141">Publishing Refresh</span></span>

<span data-ttu-id="c9005-142">Когда клиент обменивается данными с сервером, чтобы выполнить обновление публикации, он использует учетные данные пользователя, выполнившего вход, для запроса сведений о пакетах приложения.</span><span class="sxs-lookup"><span data-stu-id="c9005-142">When the client communicates with the server to perform a publishing refresh, it uses the credentials of the logged on user to request information about the application packages.</span></span> <span data-ttu-id="c9005-143">Вы должны защитить связь между клиентом App-V и сервером управления App-V, чтобы убедиться в том, что ни одна из публикуемых данных не может быть изменена при передаче.</span><span class="sxs-lookup"><span data-stu-id="c9005-143">You should secure the communication that occurs between the App-V client and App-V Management Server to ensure that none of the publishing information can be tampered with in transit.</span></span> <span data-ttu-id="c9005-144">Это можно сделать с помощью улучшенной защиты, использующей протоколы RTSP и HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c9005-144">This is done by using the Enhanced Security option, which will use RTSPS/HTTPS.</span></span> <span data-ttu-id="c9005-145">Связь между клиентом и расположением, в котором хранятся файлы ICO и OSD, должны использовать IPsec для общих ресурсов SMB/CIFS и HTTPS для сервера IIS.</span><span class="sxs-lookup"><span data-stu-id="c9005-145">Communication between the Client and the location where the ICO and OSD files are stored should use IPsec for SMB/CIFS shares and HTTPS for an IIS server.</span></span>

<span data-ttu-id="c9005-146">**Примечание**  Если вы используете IIS для публикации файлов ICO и OSD, настройте тип MIME для OSD = TXT; в противном случае IIS не будет обрабатывать файлы ICO и OSD для клиентов.</span><span class="sxs-lookup"><span data-stu-id="c9005-146">**Note** If you are using IIS to publish the ICO and OSD files, configure a MIME type for OSD=TXT; otherwise, IIS will refuse to serve the ICO and OSD files to clients.</span></span>

 

### <span data-ttu-id="c9005-147">Потоковая передача пакетов</span><span class="sxs-lookup"><span data-stu-id="c9005-147">Package Streaming</span></span>

<span data-ttu-id="c9005-148">Когда пользователь запускает приложение в первый раз или, если в клиенте заданы автоматически загружаемые параметры, пакет приложения передается из сервера в клиентский кэш.</span><span class="sxs-lookup"><span data-stu-id="c9005-148">When a user launches an application for the first time, or if auto-loading parameters have been set on the client, the application package is streamed from a server to the client cache.</span></span> <span data-ttu-id="c9005-149">Этот процесс поддерживает протоколы RTSP/RTSP, HTTP/HTTPS и SMB/CIFS.</span><span class="sxs-lookup"><span data-stu-id="c9005-149">This process supports the RTSP/RTSPS, HTTP/HTTPS, and SMB/CIFS protocols.</span></span> <span data-ttu-id="c9005-150">OSD файлы управляют использованием используемых протоколов, если только параметр **APPLICATIONSOURCEROOT** или **OverrideURL** не настроен на клиентах.</span><span class="sxs-lookup"><span data-stu-id="c9005-150">The OSD files control which protocols are used, unless the **ApplicationSourceRoot** or **OverrideURL** setting has been configured on the clients.</span></span> <span data-ttu-id="c9005-151">Для обеспечения более высоких уровней безопасности необходимо настроить связь с помощью протоколов RTSP, HTTPS и IPsec для SMB/CIFS.</span><span class="sxs-lookup"><span data-stu-id="c9005-151">You should configure communication to occur over RTSPS, HTTPS, or IPsec for SMB/CIFS to achieve higher levels of security.</span></span> <span data-ttu-id="c9005-152">Дополнительные сведения о том, как выбрать способ связи, можно найти в руководстве по планированию и развертыванию App-V <https://go.microsoft.com/fwlink/?LinkId=122063> .</span><span class="sxs-lookup"><span data-stu-id="c9005-152">For more information about choosing which communication method to use, see the App-V Planning and Deployment Guide at <https://go.microsoft.com/fwlink/?LinkId=122063>.</span></span>

<span data-ttu-id="c9005-153">**Примечание**  Если вы используете IIS для публикации пакетов (SFT-файлов), настройте тип MIME для SFT = binary. в противном случае службы IIS не будут обрабатывать файлы SFT для клиентов.</span><span class="sxs-lookup"><span data-stu-id="c9005-153">**Note** If you are using IIS to publish packages (SFT files), configure a MIME type for SFT=Binary; otherwise, IIS will refuse to serve the SFT files to clients.</span></span>

 

### <span data-ttu-id="c9005-154">Перемещаемые профили и перенаправление папок</span><span class="sxs-lookup"><span data-stu-id="c9005-154">Roaming Profiles and Folder Redirection</span></span>

<span data-ttu-id="c9005-155">Система App-V хранит специфические пользовательские изменения в пакетах в файле usrvol \ _sftfs \ _v1. pkg.</span><span class="sxs-lookup"><span data-stu-id="c9005-155">The App-V system stores user-specific changes to packages in the usrvol\_sftfs\_v1.pkg file.</span></span> <span data-ttu-id="c9005-156">Этот файл находится в папке Application Data в профиле пользователя.</span><span class="sxs-lookup"><span data-stu-id="c9005-156">This file is located in the Application Data folder of a user’s profile.</span></span> <span data-ttu-id="c9005-157">Так как профиль или перенаправленная папка данных приложения передается между клиентом и сервером, используйте IPsec для безопасной связи.</span><span class="sxs-lookup"><span data-stu-id="c9005-157">Because the profile or a redirected Application Data folder is transferred between the client and the server, use IPsec to secure the communication.</span></span>

## <span data-ttu-id="c9005-158">Рекомендации для клиентов, подключенных к Интернету</span><span class="sxs-lookup"><span data-stu-id="c9005-158">Considerations for Internet-Facing Clients</span></span>


<span data-ttu-id="c9005-159">Для клиентов, подключенных к Интернету, важно решить, является ли клиент присоединенным к домену или не присоединен к домену.</span><span class="sxs-lookup"><span data-stu-id="c9005-159">For Internet-facing clients, it is important to consider whether the client is domain joined or non-domain joined.</span></span>

### <span data-ttu-id="c9005-160">Клиент присоединен к домену</span><span class="sxs-lookup"><span data-stu-id="c9005-160">Domain Joined Client</span></span>

<span data-ttu-id="c9005-161">По умолчанию клиенты App-V используют билеты Kerberos, выданные доменными службами Active Directory для проверки подлинности и авторизации в интрасети.</span><span class="sxs-lookup"><span data-stu-id="c9005-161">By default, App-V Clients use Kerberos tickets that were issued by Active Directory Domain Services for authentication and authorization on the intranet.</span></span> <span data-ttu-id="c9005-162">Эти билеты на Kerberos по умолчанию действительны в течение 10 часов.</span><span class="sxs-lookup"><span data-stu-id="c9005-162">These Kerberos tickets are valid for 10 hours by default.</span></span> <span data-ttu-id="c9005-163">Клиент будет использовать этот билет для доступа к серверу App-V, пока он является действительным, даже если компьютер не может подключиться к контроллеру домена для обновления билета.</span><span class="sxs-lookup"><span data-stu-id="c9005-163">The client will use this ticket to access the App-V server for as long as the ticket is valid, even if the computer is unable to connect to the domain controller to refresh the ticket.</span></span> <span data-ttu-id="c9005-164">Если срок действия билета Kerberos истекает, клиент App-V вернется к проверке подлинности NTLM и использует кэшированные учетные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="c9005-164">If the Kerberos ticket expires, the App-V client will revert to NTLM authentication and use the user’s cached credentials.</span></span>

### <span data-ttu-id="c9005-165">Клиент, не подключенный к домену</span><span class="sxs-lookup"><span data-stu-id="c9005-165">Non-Domain Joined Client</span></span>

<span data-ttu-id="c9005-166">Если пользователь работает дома и компьютер не присоединен к домену компании, App-V может по-прежнему поддерживать доставку приложений.</span><span class="sxs-lookup"><span data-stu-id="c9005-166">If a user is home-based and the computer is not joined to the company domain, App-V can still support delivering applications.</span></span> <span data-ttu-id="c9005-167">Для проверки подлинности и авторизации пользователя, чтобы выполнить обновление публикации и запустить приложения, настройте учетную запись пользователя на клиентском компьютере, чтобы сохранить имя пользователя и пароль, которые имеют доступ к среде App-V, и предоставить приложению соответствующие разрешения.</span><span class="sxs-lookup"><span data-stu-id="c9005-167">To authenticate and authorize a user to perform a publishing refresh and to start applications, configure the user account on the client computer to store the user name and password that has access to the App-V environment and to provide appropriate permissions to the applications.</span></span>

## <span data-ttu-id="c9005-168">Статьи по теме</span><span class="sxs-lookup"><span data-stu-id="c9005-168">Related topics</span></span>


[<span data-ttu-id="c9005-169">Планирование безопасности и защиты</span><span class="sxs-lookup"><span data-stu-id="c9005-169">Planning for Security and Protection</span></span>](planning-for-security-and-protection.md)

 

 





