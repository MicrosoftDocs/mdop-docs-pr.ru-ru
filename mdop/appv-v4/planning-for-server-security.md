---
title: Планирование безопасности сервера
description: Планирование безопасности сервера
author: dansimp
ms.assetid: c7cd8227-b359-41e7-a8ae-d0d5718a76a2
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 9bea1bd8287a15385200bbfb425ed8e00fbcdb02
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10815902"
---
# Планирование безопасности сервера


Чтобы повысить безопасность среды, необходимо ознакомиться с уязвимостью для любых потенциальных угроз в среде. Для обеспечения безопасности инфраструктуры App-V необходимо использовать специальные функции безопасности App-V, а также рекомендации по обеспечению безопасности и функции для базовой инфраструктуры. Защита базовой инфраструктуры служб, таких как службы IIS, доменные службы Active Directory и SQL Server, повысит общую безопасность системы App-V.

Параметры по умолчанию для установки сервера обеспечивают повышенный уровень безопасности. Однако некоторые компоненты основываются на базовой инфраструктуре, которая не настроена как часть установки. Дальнейшие действия после установки помогут повысить безопасность инфраструктуры App-V.

В каталоге содержимого содержатся все пакеты, которые нужно передавать клиентам. Для устранения множества возможных угроз безопасности эти ресурсы должны быть как можно более безопасными. Ниже приведены некоторые дополнительные рекомендации.

-   Публикация и (или) потоковая передача через UNC разрешения для этого элемента должны быть самыми строгими в среде. Используйте разрешения NTFS для реализации наиболее ограниченных списков управления доступом (ACL) для каталога содержимого (пользователи = чтение, администраторы = чтение и запись).

-   Службы IIS, используемые для публикации и (или) потокового содержимого, настраивают IIS для поддержки только встроенной проверки подлинности Windows. Удалите анонимный доступ к серверу IIS и ограничьте доступ к каталогу с разрешениями NTFS.

-   RTSP/RTSP to Streaming Packages (пакет приложения) — Настройка политики провайдера App-V на требование проверки подлинности, принудительное использование разрешений доступа и предоставление доступа к политике поставщика только обязательным группам. Настройте приложения с соответствующими разрешениями в базе данных.

Храните количество пользователей с правами администратора до минимума, чтобы снизить вероятность угроз для данных в хранилище данных и избегать публикации вредоносных приложений в инфраструктуре.

## Безопасность Application Virtualization


Приложение App-V использует несколько методов связи между различными компонентами инфраструктуры. При планировании инфраструктуры App-V Защита связи между серверами может снизить риски безопасности, которые могут уже присутствовать в существующей сети.

### Хранилище данных

Сервер управления виртуализацией приложений и служба управления виртуализацией приложений взаимодействуют с хранилищем данных с помощью подключения SQL через TCP порт 1433. Сервер управления использует хранилище данных для извлечения данных приложения и конфигурации и записывает сведения об использовании в базу данных. Служба управления взаимодействует с хранилищем данных от имени администратора, который настраивает инфраструктуру App-V. Поскольку хранилище данных содержит важную информацию, важно минимизировать угрозу для этих данных.

Рекомендуется защитить связь между сервером управления App-V, службой управления и хранилищем данных с помощью IPsec (Internet Protocol Security). В частности, создавайте политики, которые защищают канал связи между хранилищем данных (SQL) и сервером управления и хранилищем данных и службой управления. Вы также можете развернуть изоляцию сервера и домена с помощью IPsec, гарантируя, что все компоненты инфраструктуры App-V будут взаимодействовать только с защищенными каналами. Сведения о реализации IPsec можно найти в следующей документации:

-   Для Windows server2003 <https://go.microsoft.com/fwlink/?LinkId=133226> : ( https://go.microsoft.com/fwlink/?LinkId=133226) .

-   Для Windows Server2008 <https://go.microsoft.com/fwlink/?LinkId=133227> : ( https://go.microsoft.com/fwlink/?LinkId=133227) .

### Каталог содержимого

Установка сервера управления App-V настраивает расположение для каталога содержимого. Этот каталог — это расположение хранилища для виртуализированных пакетов приложений. Это расположение может быть локальным для сервера или его можно поместить на удаленную сетевую папку. Таким образом, реализуйте IPsec, чтобы защитить связь с удаленным расположением для каталога содержимого.

Кроме того, вы можете использовать виртуальный каталог на сервере IIS для потоковой передачи пакетов клиентам. Если виртуальный каталог, созданный для содержимого, расположен на удаленном источнике, используйте IPsec для обеспечения взаимодействия между сервером IIS и местом в удаленном хранилище.

В каталоге содержимого содержатся все пакеты, которые передаются в поток на клиентские компьютеры. Для устранения множества возможных угроз безопасности эти ресурсы должны быть как можно более безопасными.

### Протоколы безопасности

Вы можете использовать RTSP или HTTPS для расширенной безопасной связи. RTSP — это протокол, который используется серверами App-V, а HTTPS — это протокол, который используется серверами IIS. Эти протоколы используются при публикации приложений с сервера в клиентском компьютере Application Virtualization. Определив необходимый протокол, добавьте сервер публикации, использующий этот протокол.

### <a href="" id="configuring-app-v-servers-for-rtsps-"></a>Настройка серверов App-V для RTSP

Установка или Настройка серверного сервера управления App-V или потокового сервера для использования усиленной безопасности (например, TLS) требует подготовки сертификата X. 509 v3 на сервере App-V. При подготовке к установке или настройке системы безопасности для сервера необходимо выполнить определенные требования. Технические требования по развертыванию и настройке сертификатов для более безопасного сервера управления App-V или потокового сервера включают следующее:

-   Сертификат должен быть действительным. В противном случае клиент прерывает соединение.

-   Сертификат должен содержать правильное расширенное использование ключа (EKU)-проверка подлинности сервера (OID 1.3.6.1.5.5.7.3.1). В противном случае клиент прерывает соединение.

-   Полное доменное имя (FQDN) сертификата должно совпадать с именем сервера, на котором он установлен. Например, если клиент вызывается `RTSPS://Myserver.mycompany.com/content/MyApp.sft` , но в поле содержится значение "сертификат **выдан** " `Myserver1.mycompany.com` , клиент не будет подключается к серверу, а сеанс завершается, даже если `Myserver.mycompany.com` он и `Myserver1.mycompany.com` разрешается в один и тот же IP-адрес.

    **Примечание**  Если вы используете App-V в кластере с балансировкой сетевой нагрузки, для сертификата необходимо настроить *альтернативные имена субъектов* (SAN) для поддержки протоколов RTSP. Сведения о настройке центра сертификации (ЦС) и создании сертификатов с помощью сетей SAN см. в разделе <https://go.microsoft.com/fwlink/?LinkId=133228> ( https://go.microsoft.com/fwlink/?LinkId=133228) .

     

-   Центр сертификации, выдавший сертификат серверу App-V, должен быть надежным для клиента, подключающегося к серверу. В противном случае клиент прерывает соединение.

-   Необходимо изменить разрешения для *закрытого ключа сертификата* , чтобы включить доступ к службе Server App-V. По умолчанию сервер управления App-V и службы потокового сервера выполняются под учетной записью Network Service. Когда на сервере генерируется PKCS \ #10, создается закрытый ключ. Только локальные группы системы и администраторы имеют доступ к этому разделу. Эти списки ACL по умолчанию не позволяют серверу App-V принимать безопасные подключения.

    **Примечание**  Сведения о настройке инфраструктуры открытых ключей (PKI) можно найти в разделе <https://go.microsoft.com/fwlink/?LinkId=133229> ( https://go.microsoft.com/fwlink/?LinkId=133229) .

     

### Настройка серверов IIS с помощью HTTPS

В некоторых конфигурациях инфраструктуры приложение App-V может использовать серверы IIS. Дополнительные сведения о настройке серверов IIS см. в разделе <https://go.microsoft.com/fwlink/?LinkId=133230> ( https://go.microsoft.com/fwlink/?LinkId=133230) .

**Примечание**  Если вы используете IIS для публикации файлов ICO и OSD, настройте тип MIME для OSD = TXT; в противном случае IIS не будет обрабатывать файлы ICO и OSD для клиентов.

 

### Безопасность на уровне приложения

Вы можете настроить сервер для потоковой передачи определенных приложений на Рабочий стол пользователя. Однако разрешения на доступ на самом деле предоставлены на уровне пакета, а не на уровне приложения. Несмотря на то, что конкретное приложение может не публиковаться на рабочем столе пользователя, если пользователь имеет разрешение на добавление приложений или является администратором на клиентском компьютере, он может создать и использовать ярлык на клиенте, чтобы запускать все приложения в пакете.

## Настройка администрирования App-V для распределенной среды


При проектировании инфраструктуры для конкретной организации вы можете установить веб-службу управления App-V на компьютере, отличном от компьютера, на котором установлен сервер управления App-V. Ниже приведены распространенные причины разделения этих компонентов App-V.

-   Производительность

-   Надежность

-   Доступность

-   Масштабируемость

Для правильной работы инфраструктуры разделение консоли управления App-V, сервера управления и веб-службы управления требует дополнительной настройки. Подробные сведения о том, как настроить сервер, приведены [в разделе Настройка доверия сервера для делегирования](how-to-configure-the-server-to-be-trusted-for-delegation.md).

## Статьи по теме


[Планирование безопасности и защиты](planning-for-security-and-protection.md)

 

 





