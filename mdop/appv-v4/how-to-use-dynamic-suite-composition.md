---
title: Использование функции формирования динамических пакетов
description: Использование функции формирования динамических пакетов
author: dansimp
ms.assetid: 24147feb-a0a8-4791-a8e5-cbe5fe13c762
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 3bff4c9721352785cf6db5c497234ceaa3c5e448
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10816419"
---
# Использование функции формирования динамических пакетов


Композиция динамических наборов в Application Virtualization позволяет определять приложение как зависящее от другого приложения, например по промежуточному по или с помощью плагина. Это позволяет приложению взаимодействовать с промежуточным по или плагином в виртуальной среде, где обычно это запрещено. Это полезно, так как дополнительный пакет приложения можно использовать с несколькими другими приложениями, которые называются *основными приложениями*, что позволяет каждому основному приложению ссылаться на один и тот же дополнительный пакет.

Вы можете использовать композицию динамического набора при последовательной последовательности приложений, зависящих от подключаемых модулей, таких как элементы ActiveX, или для приложений, которые зависят от этого по (например, OLE DB или среды выполнения Java (JRE). Если каждому приложению, использующему эти зависимые компоненты, требуется виртуализация, в том числе компоненты, для обновления этих компонентов потребуется повторная последовательность всех основных приложений. Если вы выполняете последовательность основных приложений без компонентов, а затем поочередно полагатье промежуточный план или плагин в качестве дополнительного пакета, необходимо обновить только дополнительный пакет.

Одним из преимуществ такого подхода является снижение размера основных пакетов. Другое преимущество заключается в том, что он обеспечивает более эффективное управление разрешениями на доступ к дополнительным приложениям. Обратите внимание, что дополнительное приложение может быть помещено в поток обычным образом и не должно быть полностью кэшировано для выполнения.

У основного пакета может быть несколько вспомогательных пакетов. Однако поддерживается только один уровень зависимостей, поэтому вы не можете определить дополнительный пакет, как зависимый от другого вспомогательного пакета. Кроме того, дополнительное приложение может быть только вспомогательным по по уровням или плагином и не может быть другим полноценным продуктом программного обеспечения.

Если вы планируете сделать несколько основных приложений зависимыми от одного промежуточного продукта, убедитесь, что вы протестируете эту конфигурацию, чтобы определить потенциальный эффект для производительности системы перед его развертыванием.

**Важно!**  Зависимости пакетов можно задать в качестве обязательных для основного приложения. Если дополнительный пакет помечен как обязательный и недоступен по какой-либо причине при загрузке, загрузка дополнительного пакета завершится сбоем. Кроме того, если пользователь попытается запустить его, происходит сбой основного приложения.

 

С помощью описанных ниже процедур вы можете создать дополнительный пакет для плагина или компонента по промежуточного по, а затем с помощью финальной процедуры можно определить зависимость в OSD-файле дополнительного пакета.

**Создание дополнительного пакета для надстройки с помощью композиции динамического набора**

1.  На компьютере, на котором установлен образ с чистым изображением, установите Application Virtualization Sequencer и сохраните состояние компьютера.

2.  Поочередное применение основного приложения и сохранение пакета в папке содержимого на сервере.

3.  Восстановите состояние компьютера, на котором установлен виртуализация, в действии 1.

4.  Установка и Настройка основного приложения локально на компьютере, на котором установлен виртуализация.

    **Важно!**  Необходимо указать новый корневой каталог пакета для вторичного пакета.

     

5.  Запустите этап мониторинга Sequencer.

6.  Установите плагин на компьютере виртуализации и настройте его нужным образом.

7.  Откройте основное приложение и убедитесь, что плагин работает правильно.

8.  На консоли Sequencer создайте фиктивное приложение, представляющее дополнительный пакет, который будет содержать плагин, и щелкните значок.

9.  Сохраните пакет в папке содержимого на сервере.

    **Примечание**  Для упрощения управления вспомогательными пакетами рекомендуется, чтобы имя пакета включало термин "дополнительный пакет", чтобы подчеркнуть, что это пакет, который не будет работать как автономное приложение (например, **\ [имя подсистемы]] дополнительный пакет**).

     

**Создание дополнительного пакета для промежуточного слоя с помощью композиции динамического набора**

1.  На компьютере, на котором установлен образ с чистым изображением, установите Application Virtualization Sequencer и сохраните состояние компьютера.

2.  Установка промежуточного слоя локально на компьютере виртуализации и его настройка.

3.  Поочередное применение основного приложения и сохранение пакета в папке содержимого на сервере.

4.  Восстановите состояние компьютера, на котором установлен виртуализация, в действии 1.

5.  Запустите секвенсор, чтобы создать новый пакет.

6.  Запустите этап мониторинга Sequencer.

7.  Установите приложение промежуточного слоя на компьютере виртуализации и настройте его как обычную установку.

8.  Завершите процесс упорядочивания.

9.  Сохраните пакет в папке содержимого на сервере.

    **Примечание**  Для упрощения управления вспомогательными пакетами рекомендуется, чтобы имя пакета включало термин "дополнительный пакет", чтобы подчеркнуть, что это пакет, который не будет работать как автономное приложение (например, **\ [название промежуточного по]] дополнительный пакет**.

     

**Определение зависимости в основном пакете**

1. На сервере откройте OSD файл дополнительного пакета для редактирования. (Рекомендуется использовать редактор XML для внесения изменений в файл OSD, но в качестве альтернативы можно использовать Блокнот).

2. Скопируйте строку **href** из этого файла.

3. Откройте OSD файл основного пакета для редактирования.

4. Вставьте <strong> &lt; тег Dependencies &gt; </strong> после закрывающего тега ** &lt; /ENVLIST &gt; ** в конце раздела ** &lt; VIRTUALENV &gt; ** прямо перед тегом ** &lt; /VIRTUALENV &gt; ** .

5. Вставьте строку **href в базу кода** из дополнительного пакета после только что созданного тега ** &lt; зависимостей &gt; ** .

6. Если дополнительный пакет является обязательным, это означает, что он должен быть запущен до начала основного пакета, добавьте в тег **CodeBase** свойство **обязательно = "true"** . Если это свойство не является обязательным, его можно опустить.

7. Закройте тег ** &lt; зависимостей &gt; ** , вставив указанные ниже сведения.

   **&lt;/DEPENDENCIES&gt;**

8. Просмотрите изменения, внесенные в OSD файл, а затем сохраните и закройте файл. В следующем примере показано, как должен выглядеть добавленный раздел. Указанные здесь значения тега предназначены только для примера.

   **&lt;VIRTUALENV&gt;**

        **&lt;ENVLIST&gt;**

   **…**

        **&lt;/ENVLIST&gt;**

        **&lt;DEPENDENCIES&gt;**

             **&lt;CODEBASE HREF="rtsp://virt\_apps/package.1/package.1.sft" GUID="D54C80FA-9DFF-459D-AA33-DD852C9FBFBA" SYSGUARDFILE="package.1\\osguard.cp"/&gt;**

             **&lt;CODEBASE HREF="rtsp://sample\_apps/package.2/sample.sft" GUID="D54C80FA-9DFF-459D-AA33-DD852C9FBFBA" SYSGUARDFILE="package.2\\osguard.cp" MANDATORY="TRUE" /&gt;**

        **&lt;/DEPENDENCIES&gt;**

   **&lt;/VIRTUALENV&gt;**

9. Если дополнительный пакет содержит какие – либо записи в разделе ** &lt; ENVLIST &gt; ** файла OSD, необходимо скопировать эти записи в тот же раздел основного пакета.

## Статьи по теме


[Создание и обновление виртуальных приложений с помощью секвенсора App-V](how-to-create-or-upgrade-virtual-applications-using--the-app-v-sequencer.md)

 

 





