---
title: Настройка действий сценариев
description: Настройка действий сценариев
author: dansimp
ms.assetid: 367e28f1-d8c2-4845-a01b-2fff9128ccfd
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 2bfa264be447a0a8560e4af16ccaadc2ec1db3f6
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10812389"
---
# Настройка действий сценариев


Редактор действий со сценариями позволяет администратору создавать действия, которые должны выполняться во время настройки MED-V Workspace, а также определять порядок их выполнения.

Ниже приведен список действий, которые можно добавить в сценарий настройки домена.

-   **Перезагрузите Windows**, перезапустите Windows.

-   **Присоединение к**домену — если присоединиться к домену, включите это действие и настройте имя пользователя, пароль, полное доменное имя, NetBIOS-имя домена и организационное подразделение (необязательно).

-   **Проверьте подключение**, настройте сервер для подключения и убедитесь, что Рабочая область MED-V может подключаться к сетевому ресурсу (например, серверу домена).

-   **Командная строка**— настройте сценарий в рабочей области MED-V и введите командную строку, содержащую путь к скрипту и аргументы сценария.

-   **Переименование компьютера**— переименование компьютера виртуальной машины в соответствии с заданными параметрами.

-   **Отключение автоматического входа в систему**— отключите функцию автоматического входа в Windows. Это действие необходимо добавить в конце сценариев, которые добавляют компьютер в домен.

## <a href="" id="how-to-set-up-script-actions-"></a>Настройка действий сценариев


**Настройка действий сценария**

1.  На вкладке **Настройка виртуальной машины** нажмите кнопку **Редактор скриптов**.

2.  В диалоговом окне **действия со сценарием** нажмите кнопку **Добавить**, а затем в подменю выберите нужные действия.

3.  Настройте действия, как описано в приведенных ниже таблицах.

    **Примечание** 
     **Переименование компьютера** настроено на вкладке **Параметры виртуальной машины** . Дополнительные сведения [можно найти в разделе Настройка свойств шаблона имени компьютера виртуальной машины](how-to-configure-vm-computer-name-pattern-propertiesmedvv2.md).

     

~~~
**Note**  
To rename a computer, Windows must be restarted. It is recommended to add a Restart Windows action following a Rename Computer action.
~~~



4. Чтобы настроить порядок действий, выберите нужное действие и нажмите кнопку **вверх** или **вниз**.

5. Нажмите кнопку **ОК**.

**Примечание**  
При выполнении сценария присоединения к домену, чтобы сценарий работал, пользователь, вошедшего в виртуальную машину рабочей области MED-V, должен иметь права локального администратора.



**Примечание.**  
При запуске автоматического входа в систему рекомендуется отключить локальную гостевую учетную запись, используемую для автовхода, после завершения первоначальной настройки.



### <a href="" id="bkmk-joindomainproperties"></a>

**Присоединение свойств домена**

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Свойство</th>
<th align="left">Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>Учетные данные, которые следует использовать при присоединении виртуальной машины к домену.</p></td>
<td align="left"><p>Выберите один из следующих учетных данных, которые нужно использовать при присоединении виртуальной машины к домену.</p>
<ul>
<li><p><strong>С помощью учетных данных </strong> для пользователей MED-V — учетные данные конечного пользователя.</p></li>
<li><p><strong>Используйте указанные ниже учетные данные </strong> , а затем введите имя пользователя и пароль в соответствующих полях.</p></li>
</ul>
<div class="alert">
<strong>Примечание.</strong><br/><p>Введенные учетные данные видны всем пользователям рабочей области MED-V. Не рекомендуется предоставлять учетные данные администратора домена.</p>
</div>
<div>

</div></td>
</tr>
<tr class="even">
<td align="left"><p>Домен, к которому присоединяется домен</p></td>
<td align="left"><p>Выберите один из следующих вариантов:</p>
<ul>
<li><p><strong>Использовать доменное имя, используемое в начале рабочей области </strong> — присоединиться к домену, введенному конечным пользователем при входе в клиент MED-V.</p>
<p>Чтобы определить сопоставление из NetBIOS для полных доменных имен, выберите вариант <strong> Глобальная таблица сопоставления доменов </strong> . В таблице глобальный домен сопоставления нажмите кнопку <strong> Добавить </strong> , введите NetBIOS- <strong> имя домена </strong> и полное <strong> доменное имя </strong> и нажмите кнопку <strong> ОК </strong> .</p></li>
<li><p><strong>Используйте следующее доменное имя </strong> — присоединиться к указанному домену; введите доменное имя и доменное имя NetBIOS в соответствующие поля.</p></li>
</ul></td>
</tr>
<tr class="odd">
<td align="left"><p>Организационное подразделение</p></td>
<td align="left"><p>Для присоединения компьютера к определенному подразделению может быть задано подразделение Организации (OU). Формат должен следовать за различающимся именем в подразделении: OU = &lt; подразделение &gt; , &lt; контроллер домена &gt; (например, OU = QATest, DC = IL, DC = MED-V, DC = "com").</p>
<div class="alert">
<strong>Warning</strong><br/><p>Поддерживается только подразделение одного уровня, как показано в примере выше.</p>
</div>
<div>
 
</div></td>
</tr>
</tbody>
</table>

 

### <a href="" id="bkmk-checkconnectivityproperties"></a>

**Проверка свойств подключения**

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Свойство</th>
<th align="left">Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>IP-адрес</p></td>
<td align="left"><p>IP-адрес сервера, на который проверяется соединение.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Port</p></td>
<td align="left"><p>Порт сервера, на который проверяется соединение.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Превышено время ожидания</p></td>
<td align="left"><p>Время ожидания ответа (в секундах).</p></td>
</tr>
</tbody>
</table>

 

### <a href="" id="bkmk-commandlineproperties"></a>

**Свойства командной строки**

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Свойство</th>
<th align="left">Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>Путь</p></td>
<td align="left"><p>Путь к командной строке.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Arguments</p></td>
<td align="left"><p>Аргументы командной строки.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Ожидание выхода</p></td>
<td align="left"><p>Установите флажок, чтобы дождаться возврата, прежде чем продолжить выполнение действий сценария.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Сбой при ошибке</p></td>
<td align="left"><p>Установите этот флажок, если возвращено ничего, но не указанное значение.</p>
<p>Введите значение, которое будет указывать на команду как успешное.</p>
<p>По умолчанию: <strong> 0</strong></p></td>
</tr>
<tr class="odd">
<td align="left"><p>Однократное выполнение</p></td>
<td align="left"><p>Установите этот флажок, чтобы запустить командную строку только один раз. Если сценарий завершается сбоем или будет отменен, эта команда не будет выполнена повторно.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Эта командная строка приводит к перезапуску Windows в рабочей области</p></td>
<td align="left"><p>Установите этот флажок, если Командная строка приводит к перезапуску после завершения.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Разрешить взаимодействие</p></td>
<td align="left"><p>Установите этот флажок, если для команды потребуется вмешательство пользователя.</p></td>
</tr>
<tr class="even">
<td align="left"><p>Сообщение о ходе выполнения</p></td>
<td align="left"><p>Сообщение, отображаемое пользователю во время выполнения команды.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>Сообщение об ошибке</p></td>
<td align="left"><p>Сообщение, которое отображается для пользователя, если не удается выполнить команду.</p></td>
</tr>
</tbody>
</table>

 

При настройке действия командной строки можно использовать несколько переменных, как указано в таблице ниже.

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Параметр</th>
<th align="left">Значение</th>
<th align="left">Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>%MEDVUser%</p></td>
<td align="left"><p>Имя пользователя, прошедшего проверку подлинности.</p></td>
<td align="left"><p>Имя пользователя, прошедшего проверку подлинности в MED-V. Имя пользователя и пароль можно использовать в сценарии настройки виртуальной машины "присоединение к домену".</p></td>
</tr>
<tr class="even">
<td align="left"><p>%MEDVPassword%</p></td>
<td align="left"><p>Пароль, прошедший проверку подлинности.</p></td>
<td align="left"><p>Пароль, прошедший проверку подлинности в MED-V. Имя пользователя и пароль можно использовать в сценарии настройки виртуальной машины "присоединение к домену".</p></td>
</tr>
<tr class="odd">
<td align="left"><p>%MEDVDomain%</p></td>
<td align="left"><p>Настраиваемый домен.</p></td>
<td align="left"><p>Домен, настроенный для проверки подлинности в MED-V. Его можно использовать в сценарии настройки виртуальной машины.</p></td>
</tr>
<tr class="even">
<td align="left"><p>%DesiredMachineName%</p></td>
<td align="left"><p>Имя компьютера.</p></td>
<td align="left"><p>Уникальное имя компьютера, настроенное в приложении управления. Его можно использовать в сценарии настройки виртуальной машины.</p></td>
</tr>
</tbody>
</table>

 

## Статьи по теме


[Настройка параметров виртуальной машины для рабочей области MED-V](how-to-configure-the-virtual-machine-setup-for-a-med-v-workspacemedvv2.md)

[Настройка свойств шаблона имени компьютера виртуальной машины](how-to-configure-vm-computer-name-pattern-propertiesmedvv2.md)

 

 





