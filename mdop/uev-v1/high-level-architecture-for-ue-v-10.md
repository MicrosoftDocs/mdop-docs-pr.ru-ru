---
title: Высокоуровневая архитектура для UE-V 1.0
description: Высокоуровневая архитектура для UE-V 1.0
author: dansimp
ms.assetid: d54f9f10-1a4d-4e56-802d-22d51646e1cc
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 76703cf4c7297401e6516830bf194cef741d60ec
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10827099"
---
# Высокоуровневая архитектура для UE-V 1.0


В этой статье описаны элементы архитектуры высокого уровня в решении для перемещения параметров Microsoft User Experience Virtualization (UE-V). Следующие элементы являются частью стандартного развертывания UE-V.

![Архитектурная схема агента UE-v](images/ue-vagentarchitecturaldiagram.gif)

Агент UE-V отслеживает приложения и процессы операционной системы, так как они идентифицированы в шаблонах расположения параметров UE-V. При запуске приложения или операционной системы параметры считываются из пакета параметров и применяются к компьютеру. Когда приложение закрывается, а операционная система заблокирована или завершает работу, параметры сохраняются в пакете параметров UE-V в местоположении хранения параметров.

## Место хранения параметров


Место хранения параметров — это файловый ресурс, доступ к которому осуществляется агентом виртуализации пользователей для чтения и записи параметров. Это расположение является либо домашним каталогом Active Directory, либо определено во время установки UE-V. Вы можете указать расположение во время установки агента UE-V или позже, используя групповую политику, WMI или PowerShell. Расположение может находиться в общей общей папке, к которой пользователи могут получить доступ. Если место хранения параметров не задано во время установки, UE-V будет использовать основной каталог в службе каталогов Active Directory. Агент UE-V проверит расположение и создаст системную папку, которая скрыта от пользователя, в котором нужно сохранить параметры пользователя и получить к ним доступ. Дополнительные сведения о хранилище параметров можно найти [в разделе Подготовка среды для UE-V](preparing-your-environment-for-ue-v.md).

## Агент UE-V


Агент UE-V установлен на каждом компьютере с параметрами, которые синхронизируются с помощью виртуализации взаимодействия с пользователем. Агент отслеживает зарегистрированные приложения и операционную систему на предмет всех изменений, внесенных в параметры, и синхронизирует эти параметры между компьютерами. Параметры применяются из места хранения параметров к приложению при запуске приложения. Эти параметры затем сохраняются в хранилище параметров при закрытии приложения. Параметры операционной системы применяются, когда пользователь входит в систему, когда компьютер разблокирован, или когда пользователь подключается к компьютеру удаленно с помощью протокола удаленного рабочего стола (RDP). Агент сохраняет параметры, когда пользователь выходит из системы, когда компьютер заблокирован, или когда удаленное подключение разорвано. Дополнительные сведения об агенте UE-V можно найти в разделе [Подготовка среды для UE-v](preparing-your-environment-for-ue-v.md).

## <a href="" id="bkmk-settingslocationtemplate"></a>Шаблоны расположений параметров


Шаблон расположения параметров — это XML-файл, в котором определяются расположения параметров, которые нужно отслеживать с помощью виртуализации взаимодействия с пользователем. На компьютерах, на которых запущен агент UE-V, записываются и применяются только расположения параметров, определенные в этих шаблонах параметров. Шаблон расположения параметров не содержит значений параметров, а только тех расположений, в которых хранятся значения на компьютере.

UE-V включает набор шаблонов расположений параметров, задающих расположение параметров для некоторых приложений Майкрософт и параметров Windows. Администратор может создавать шаблоны расположений с пользовательскими параметрами с помощью генератора UE-V.

[Планирование того, какие приложения необходимо синхронизировать с UE-V 1.0](planning-which-applications-to-synchronize-with-ue-v-10.md)

[Планирование развертывания пользовательского шаблона для UE-V 1.0](planning-for-custom-template-deployment-for-ue-v-10.md)

[Работа с пользовательскими шаблонами UE-V и генератором UE-V](working-with-custom-ue-v-templates-and-the-ue-v-generator.md)

## Пакеты параметров


Параметры приложения и параметры Windows хранятся в пакетах параметров, которые создаются агентом UE-V. Пакет параметров — это коллекция параметров, которые представлены в шаблонах расположения параметров. Эти пакеты параметров будут собраны, локально сохранены, а затем скопированы в место хранения параметров. "Последняя запись WINS" определяет, какие параметры будут сохраняться, когда один пользователь синхронизирует более одного компьютера в место хранения. Агент, запускаемый на одном компьютере, считывает и записывает в расположение параметры, независимо от агентов, запущенных на других компьютерах. Последние записанные параметры и значения применяются при чтении следующего агента из места хранения параметров.

![процесс генератора UE-v](images/ue-vgeneratorprocess.gif)

## Каталог шаблонов параметров


Каталог шаблонов параметров — это путь к папке на компьютерах UE-V или сетевая папка SMB, в которой хранятся все пользовательские шаблоны расположений параметров. Агент UE-V извлекает из этого расположения новые или обновленные шаблоны. Агент UE-V проверяет это расположение один раз в день и обновляет режим синхронизации на основе шаблонов в этой папке. Шаблоны, добавленные или обновленные в этой папке с момента последней проверки, регистрируются агентом UE-V. Агент UE-V отменяет регистрацию шаблонов, которые были удалены из этой папки. Шаблоны регистрируются и отменяются из регистрации один раз в день с помощью планировщика заданий. Если вы будете использовать только шаблоны расположений параметров по умолчанию, которые включены в UE-V, каталог шаблонов параметров не нужен. Дополнительные сведения о каталогах развертывания параметров можно найти в разделе [Планирование развертывания настраиваемого шаблона для UE-V 1,0](planning-for-custom-template-deployment-for-ue-v-10.md).

## Генератор виртуализации взаимодействия с пользователем


Генератор виртуализации взаимодействия с пользователем позволяет создавать пользовательские шаблоны расположений параметров, в которых будут храниться расположения параметров для приложений, используемых в Организации, и которые нужно включить в решение для перемещаемых параметров. Генератор UE-V попытается найти расположение значений реестра и файлов параметров для приложений, а затем зарегистрирует эти расположения в XML-файле шаблона расположения параметров. Затем вы можете распространить шаблоны расположений параметров на компьютеры пользователей. Генератор UE-V также позволяет администратору изменить существующий шаблон или проверить шаблон, созданный с помощью другого редактора XML.

Генератор UE-V наблюдает за приложением, чтобы найти и записать параметры хранения параметров. Для этого он следит за тем, где приложение считывает или пишет записи в реестре hKey \ _CURRENT \ _USER или в папках с файлами в разделе **Пользователи** \ \ \ [имя пользователя \] \ \ **AppData**  \\  **роуминг и пользователи** \ \ \ [имя пользователя \] \ \ **AppData**  \\  **Local**.

В процессе обнаружения исключаются разделы реестра и файлы, в которых зарегистрированный пользователь не может записать значения. Ни один из этих элементов не будет включен в XML-файл. В процессе обнаружения также исключаются разделы реестра и файлы, связанные с основными функциями операционной системы Windows.

Дополнительные сведения о генераторе UE-V можно найти [в разделе Установка генератора UE-v](installing-the-ue-v-generator.md).

## Статьи по теме


[Microsoft User Experience Virtualization (UE-V) 1.0](index.md)

[Начало работы с User Experience Virtualization 1.0](getting-started-with-user-experience-virtualization-10.md)

[Сведения о User Experience Virtualization 1.0](about-user-experience-virtualization-10.md)

[Работа с пользовательскими шаблонами UE-V и генератором UE-V](working-with-custom-ue-v-templates-and-the-ue-v-generator.md)

 

 





