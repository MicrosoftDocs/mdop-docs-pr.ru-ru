---
title: Высокоуровневая архитектура для UE-V 1.0
description: Высокоуровневая архитектура для UE-V 1.0
author: dansimp
ms.assetid: d54f9f10-1a4d-4e56-802d-22d51646e1cc
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 76703cf4c7297401e6516830bf194cef741d60ec
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10827099"
---
# <span data-ttu-id="5fcdd-103">Высокоуровневая архитектура для UE-V 1.0</span><span class="sxs-lookup"><span data-stu-id="5fcdd-103">High-Level Architecture for UE-V 1.0</span></span>


<span data-ttu-id="5fcdd-104">В этой статье описаны элементы архитектуры высокого уровня в решении для перемещения параметров Microsoft User Experience Virtualization (UE-V).</span><span class="sxs-lookup"><span data-stu-id="5fcdd-104">This topic describes high-level architectural elements of the Microsoft User Experience Virtualization (UE-V) settings roaming solution.</span></span> <span data-ttu-id="5fcdd-105">Следующие элементы являются частью стандартного развертывания UE-V.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-105">The following elements are part of a standard UE-V deployment.</span></span>

![Архитектурная схема агента UE-v](images/ue-vagentarchitecturaldiagram.gif)

<span data-ttu-id="5fcdd-107">Агент UE-V отслеживает приложения и процессы операционной системы, так как они идентифицированы в шаблонах расположения параметров UE-V.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-107">The UE-V Agent monitors the applications and the operating system processes as they are identified in the UE-V settings location templates.</span></span> <span data-ttu-id="5fcdd-108">При запуске приложения или операционной системы параметры считываются из пакета параметров и применяются к компьютеру.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-108">When the application or operating system starts, the settings are read from the settings package and applied to the computer.</span></span> <span data-ttu-id="5fcdd-109">Когда приложение закрывается, а операционная система заблокирована или завершает работу, параметры сохраняются в пакете параметров UE-V в местоположении хранения параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-109">When the application closes or when the operating system is locked or shut down, settings are saved in a UE-V settings package in the settings storage location.</span></span>

## <span data-ttu-id="5fcdd-110">Место хранения параметров</span><span class="sxs-lookup"><span data-stu-id="5fcdd-110">Settings storage location</span></span>


<span data-ttu-id="5fcdd-111">Место хранения параметров — это файловый ресурс, доступ к которому осуществляется агентом виртуализации пользователей для чтения и записи параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-111">The settings storage location is a file share that the User Experience Virtualization agent accesses to read and write settings.</span></span> <span data-ttu-id="5fcdd-112">Это расположение является либо домашним каталогом Active Directory, либо определено во время установки UE-V.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-112">This location is either the Active Directory home directory or defined during the UE-V installation.</span></span> <span data-ttu-id="5fcdd-113">Вы можете указать расположение во время установки агента UE-V или позже, используя групповую политику, WMI или PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-113">You can set the location during the installation of the UE-V agent, or you can set it later with Group Policy, WMI, or PowerShell.</span></span> <span data-ttu-id="5fcdd-114">Расположение может находиться в общей общей папке, к которой пользователи могут получить доступ.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-114">The location can be on any common file share that users can access.</span></span> <span data-ttu-id="5fcdd-115">Если место хранения параметров не задано во время установки, UE-V будет использовать основной каталог в службе каталогов Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-115">If no setting storage location is set during installation then UE-V will use the home directory in Active Directory.</span></span> <span data-ttu-id="5fcdd-116">Агент UE-V проверит расположение и создаст системную папку, которая скрыта от пользователя, в котором нужно сохранить параметры пользователя и получить к ним доступ.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-116">The UE-V agent verifies the location and creates a system folder that is hidden from the user in which to store and access the user settings.</span></span> <span data-ttu-id="5fcdd-117">Дополнительные сведения о хранилище параметров можно найти [в разделе Подготовка среды для UE-V](preparing-your-environment-for-ue-v.md).</span><span class="sxs-lookup"><span data-stu-id="5fcdd-117">For more information about settings storage, see [Preparing Your Environment for UE-V](preparing-your-environment-for-ue-v.md).</span></span>

## <span data-ttu-id="5fcdd-118">Агент UE-V</span><span class="sxs-lookup"><span data-stu-id="5fcdd-118">UE-V Agent</span></span>


<span data-ttu-id="5fcdd-119">Агент UE-V установлен на каждом компьютере с параметрами, которые синхронизируются с помощью виртуализации взаимодействия с пользователем.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-119">The UE-V agent is installed on each computer with settings that are synchronized by User Experience Virtualization.</span></span> <span data-ttu-id="5fcdd-120">Агент отслеживает зарегистрированные приложения и операционную систему на предмет всех изменений, внесенных в параметры, и синхронизирует эти параметры между компьютерами.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-120">The agent monitors the registered applications and the operating system for any changes to that are made to settings, and it synchronizes those settings between computers.</span></span> <span data-ttu-id="5fcdd-121">Параметры применяются из места хранения параметров к приложению при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-121">Settings are applied from the settings storage location to the application when the application is started.</span></span> <span data-ttu-id="5fcdd-122">Эти параметры затем сохраняются в хранилище параметров при закрытии приложения.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-122">The settings are then saved back to the settings storage location when the application closes.</span></span> <span data-ttu-id="5fcdd-123">Параметры операционной системы применяются, когда пользователь входит в систему, когда компьютер разблокирован, или когда пользователь подключается к компьютеру удаленно с помощью протокола удаленного рабочего стола (RDP).</span><span class="sxs-lookup"><span data-stu-id="5fcdd-123">The operating system settings are applied when the user logs on, when the computer is unlocked, or when the user connects remotely to the computer by using remote desktop protocol (RDP).</span></span> <span data-ttu-id="5fcdd-124">Агент сохраняет параметры, когда пользователь выходит из системы, когда компьютер заблокирован, или когда удаленное подключение разорвано.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-124">The agent saves settings when the user logs off, when the computer is locked, or when a remote connection is disconnected.</span></span> <span data-ttu-id="5fcdd-125">Дополнительные сведения об агенте UE-V можно найти в разделе [Подготовка среды для UE-v](preparing-your-environment-for-ue-v.md).</span><span class="sxs-lookup"><span data-stu-id="5fcdd-125">For more information about the UE-V Agent, see [Preparing Your Environment for UE-V](preparing-your-environment-for-ue-v.md).</span></span>

## <a href="" id="bkmk-settingslocationtemplate"></a><span data-ttu-id="5fcdd-126">Шаблоны расположений параметров</span><span class="sxs-lookup"><span data-stu-id="5fcdd-126">Settings location templates</span></span>


<span data-ttu-id="5fcdd-127">Шаблон расположения параметров — это XML-файл, в котором определяются расположения параметров, которые нужно отслеживать с помощью виртуализации взаимодействия с пользователем.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-127">The settings location template is an XML file that defines the settings locations to be monitored by User Experience Virtualization.</span></span> <span data-ttu-id="5fcdd-128">На компьютерах, на которых запущен агент UE-V, записываются и применяются только расположения параметров, определенные в этих шаблонах параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-128">Only the settings locations defined in these settings templates are captured or applied on computers running the UE-V Agent.</span></span> <span data-ttu-id="5fcdd-129">Шаблон расположения параметров не содержит значений параметров, а только тех расположений, в которых хранятся значения на компьютере.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-129">The settings location template does not contain settings values, only the locations where values are stored on the computer.</span></span>

<span data-ttu-id="5fcdd-130">UE-V включает набор шаблонов расположений параметров, задающих расположение параметров для некоторых приложений Майкрософт и параметров Windows.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-130">UE-V includes a set of settings location templates that specify settings locations for some Microsoft applications and Windows settings.</span></span> <span data-ttu-id="5fcdd-131">Администратор может создавать шаблоны расположений с пользовательскими параметрами с помощью генератора UE-V.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-131">An administrator can create custom settings location templates by using the UE-V Generator.</span></span>

[<span data-ttu-id="5fcdd-132">Планирование того, какие приложения необходимо синхронизировать с UE-V 1.0</span><span class="sxs-lookup"><span data-stu-id="5fcdd-132">Planning Which Applications to Synchronize with UE-V 1.0</span></span>](planning-which-applications-to-synchronize-with-ue-v-10.md)

[<span data-ttu-id="5fcdd-133">Планирование развертывания пользовательского шаблона для UE-V 1.0</span><span class="sxs-lookup"><span data-stu-id="5fcdd-133">Planning for Custom Template Deployment for UE-V 1.0</span></span>](planning-for-custom-template-deployment-for-ue-v-10.md)

[<span data-ttu-id="5fcdd-134">Работа с пользовательскими шаблонами UE-V и генератором UE-V</span><span class="sxs-lookup"><span data-stu-id="5fcdd-134">Working with Custom UE-V Templates and the UE-V Generator</span></span>](working-with-custom-ue-v-templates-and-the-ue-v-generator.md)

## <span data-ttu-id="5fcdd-135">Пакеты параметров</span><span class="sxs-lookup"><span data-stu-id="5fcdd-135">Settings packages</span></span>


<span data-ttu-id="5fcdd-136">Параметры приложения и параметры Windows хранятся в пакетах параметров, которые создаются агентом UE-V.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-136">Application settings and Windows settings are stored in settings packages, which are created by the UE-V Agent.</span></span> <span data-ttu-id="5fcdd-137">Пакет параметров — это коллекция параметров, которые представлены в шаблонах расположения параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-137">A settings package is a collection of the settings that are represented in the settings location templates.</span></span> <span data-ttu-id="5fcdd-138">Эти пакеты параметров будут собраны, локально сохранены, а затем скопированы в место хранения параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-138">These settings packages are built, locally stored, and then copied to the settings storage location.</span></span> <span data-ttu-id="5fcdd-139">"Последняя запись WINS" определяет, какие параметры будут сохраняться, когда один пользователь синхронизирует более одного компьютера в место хранения.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-139">“Last write wins” determines which settings are preserved when a single user synchronizes the more than one computer to a storage location.</span></span> <span data-ttu-id="5fcdd-140">Агент, запускаемый на одном компьютере, считывает и записывает в расположение параметры, независимо от агентов, запущенных на других компьютерах.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-140">The agent that runs on one computer reads and writes to the settings location independent of agents that run on other computers.</span></span> <span data-ttu-id="5fcdd-141">Последние записанные параметры и значения применяются при чтении следующего агента из места хранения параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-141">The most recently written settings and values are applied when the next agent reads from the settings storage location.</span></span>

![процесс генератора UE-v](images/ue-vgeneratorprocess.gif)

## <span data-ttu-id="5fcdd-143">Каталог шаблонов параметров</span><span class="sxs-lookup"><span data-stu-id="5fcdd-143">Settings template catalog</span></span>


<span data-ttu-id="5fcdd-144">Каталог шаблонов параметров — это путь к папке на компьютерах UE-V или сетевая папка SMB, в которой хранятся все пользовательские шаблоны расположений параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-144">The settings template catalog is a folder path on UE-V computers or a Server Message Block (SMB) network share that stores all the custom settings location templates.</span></span> <span data-ttu-id="5fcdd-145">Агент UE-V извлекает из этого расположения новые или обновленные шаблоны.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-145">The UE-V agent retrieves new or updated templates from this location.</span></span> <span data-ttu-id="5fcdd-146">Агент UE-V проверяет это расположение один раз в день и обновляет режим синхронизации на основе шаблонов в этой папке.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-146">The UE-V agent checks this location once each day and it updates its synchronization behavior based on the templates in this folder.</span></span> <span data-ttu-id="5fcdd-147">Шаблоны, добавленные или обновленные в этой папке с момента последней проверки, регистрируются агентом UE-V.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-147">The templates that were added or updated in this folder since the last check are registered by the UE-V agent.</span></span> <span data-ttu-id="5fcdd-148">Агент UE-V отменяет регистрацию шаблонов, которые были удалены из этой папки.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-148">The UE-V agent deregisters the templates that were removed from this folder.</span></span> <span data-ttu-id="5fcdd-149">Шаблоны регистрируются и отменяются из регистрации один раз в день с помощью планировщика заданий.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-149">Templates are registered and unregistered one time per day by the task scheduler.</span></span> <span data-ttu-id="5fcdd-150">Если вы будете использовать только шаблоны расположений параметров по умолчанию, которые включены в UE-V, каталог шаблонов параметров не нужен.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-150">If you will use only the default settings location templates that are included with UE-V, then a settings template catalog is unnecessary.</span></span> <span data-ttu-id="5fcdd-151">Дополнительные сведения о каталогах развертывания параметров можно найти в разделе [Планирование развертывания настраиваемого шаблона для UE-V 1,0](planning-for-custom-template-deployment-for-ue-v-10.md).</span><span class="sxs-lookup"><span data-stu-id="5fcdd-151">For more information about settings deployment catalogs, see [Planning for Custom Template Deployment for UE-V 1.0](planning-for-custom-template-deployment-for-ue-v-10.md).</span></span>

## <span data-ttu-id="5fcdd-152">Генератор виртуализации взаимодействия с пользователем</span><span class="sxs-lookup"><span data-stu-id="5fcdd-152">User Experience Virtualization Generator</span></span>


<span data-ttu-id="5fcdd-153">Генератор виртуализации взаимодействия с пользователем позволяет создавать пользовательские шаблоны расположений параметров, в которых будут храниться расположения параметров для приложений, используемых в Организации, и которые нужно включить в решение для перемещаемых параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-153">The User Experience Virtualization Generator enables you to create custom settings location templates which will store the settings locations of the applications that are used in the enterprise and that you want to include in the roaming settings solution.</span></span> <span data-ttu-id="5fcdd-154">Генератор UE-V попытается найти расположение значений реестра и файлов параметров для приложений, а затем зарегистрирует эти расположения в XML-файле шаблона расположения параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-154">The UE-V Generator will seek to discover the locations of registry values and the settings files for applications and then it will record those locations in a settings location template XML file.</span></span> <span data-ttu-id="5fcdd-155">Затем вы можете распространить шаблоны расположений параметров на компьютеры пользователей.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-155">You can then distribute these settings location templates to the user computers.</span></span> <span data-ttu-id="5fcdd-156">Генератор UE-V также позволяет администратору изменить существующий шаблон или проверить шаблон, созданный с помощью другого редактора XML.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-156">The UE-V Generator also allows an administrator to edit an existing template or validate a template that was created with another XML editor.</span></span>

<span data-ttu-id="5fcdd-157">Генератор UE-V наблюдает за приложением, чтобы найти и записать параметры хранения параметров.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-157">The UE-V Generator monitors an application to discover and record where it stores its settings.</span></span> <span data-ttu-id="5fcdd-158">Для этого он следит за тем, где приложение считывает или пишет записи в реестре hKey \ _CURRENT \ _USER или в папках с файлами в разделе **Пользователи** \ \ \ [имя пользователя \] \ \ **AppData**  \\  **роуминг и пользователи** \ \ \ [имя пользователя \] \ \ **AppData**  \\  **Local**.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-158">To do this, it monitors where the application reads or writes in the HKEY\_CURRENT\_USER registry or in the file folders under **Users** \\ \[User name\] \\ **AppData** \\ **Roaming and Users** \\ \[User name\] \\ **AppData** \\ **Local**.</span></span>

<span data-ttu-id="5fcdd-159">В процессе обнаружения исключаются разделы реестра и файлы, в которых зарегистрированный пользователь не может записать значения.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-159">The discovery process excludes registry keys and files to which the logged-in user cannot write values.</span></span> <span data-ttu-id="5fcdd-160">Ни один из этих элементов не будет включен в XML-файл.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-160">None of these will be included in the XML file.</span></span> <span data-ttu-id="5fcdd-161">В процессе обнаружения также исключаются разделы реестра и файлы, связанные с основными функциями операционной системы Windows.</span><span class="sxs-lookup"><span data-stu-id="5fcdd-161">The discovery process also excludes registry keys and files that are associated with the core functionality of the Windows operating system.</span></span>

<span data-ttu-id="5fcdd-162">Дополнительные сведения о генераторе UE-V можно найти [в разделе Установка генератора UE-v](installing-the-ue-v-generator.md).</span><span class="sxs-lookup"><span data-stu-id="5fcdd-162">For more information about the UE-V Generator, see [Installing the UE-V Generator](installing-the-ue-v-generator.md).</span></span>

## <span data-ttu-id="5fcdd-163">Статьи по теме</span><span class="sxs-lookup"><span data-stu-id="5fcdd-163">Related topics</span></span>


[<span data-ttu-id="5fcdd-164">Microsoft User Experience Virtualization (UE-V) 1.0</span><span class="sxs-lookup"><span data-stu-id="5fcdd-164">Microsoft User Experience Virtualization (UE-V) 1.0</span></span>](index.md)

[<span data-ttu-id="5fcdd-165">Начало работы с User Experience Virtualization 1.0</span><span class="sxs-lookup"><span data-stu-id="5fcdd-165">Getting Started With User Experience Virtualization 1.0</span></span>](getting-started-with-user-experience-virtualization-10.md)

[<span data-ttu-id="5fcdd-166">Сведения о User Experience Virtualization 1.0</span><span class="sxs-lookup"><span data-stu-id="5fcdd-166">About User Experience Virtualization 1.0</span></span>](about-user-experience-virtualization-10.md)

[<span data-ttu-id="5fcdd-167">Работа с пользовательскими шаблонами UE-V и генератором UE-V</span><span class="sxs-lookup"><span data-stu-id="5fcdd-167">Working with Custom UE-V Templates and the UE-V Generator</span></span>](working-with-custom-ue-v-templates-and-the-ue-v-generator.md)

 

 





