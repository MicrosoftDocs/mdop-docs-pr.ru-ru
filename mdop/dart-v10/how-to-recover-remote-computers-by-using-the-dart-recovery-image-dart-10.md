---
title: Восстановление удаленных компьютеров с помощью образа для восстановления DaRT
description: Восстановление удаленных компьютеров с помощью образа для восстановления DaRT
author: dansimp
ms.assetid: c0062208-39cd-4e01-adf8-36a11386e2ea
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop
ms.mktglfcycl: support
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 42d49c6c5c494da866785764e1c93a6bda2d667e
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/26/2020
ms.locfileid: "10822592"
---
# Восстановление удаленных компьютеров с помощью образа для восстановления DaRT


С помощью функции удаленного подключения в наборе средств диагностики и восстановления Microsoft (DaRT) 10 можно запускать инструменты DaRT удаленно на компьютере с конечным пользователем. После того как пользователь предложит администратору или сотруднику службы поддержки определенную информацию, он может управлять компьютером конечного пользователя и выполнять необходимые инструменты DaRT удаленно.

Если вы отключили инструменты DaRT при создании образа восстановления, вы по-прежнему можете получить доступ ко всем средствам. Все инструменты, кроме удаленных подключений, недоступны для конечных пользователей.

**Восстановление удаленного компьютера с помощью изображения для восстановления DaRT**

1.  Загрузите компьютер с конечным пользователем, используя изображение для восстановления DaRT.

    Вы обычно используете один из указанных ниже способов для загрузки DaRT для восстановления удаленного компьютера, в зависимости от того, как вы разворачиваете изображение для восстановления DaRT. Дополнительные сведения о развертывании изображения для восстановления DaRT можно найти в разделе [Развертывание DaRT 10](deploying-dart-10.md).

    -   Загрузите элемент DaRT из раздела восстановления на компьютере с ошибкой.

    -   Загрузите элемент DaRT из удаленной секции в сети.

    Сведения о преимуществах и недостатках каждого способа можно найти в разделе [Планирование сохранения и развертывания образа для восстановления DaRT 10](planning-how-to-save-and-deploy-the-dart-10-recovery-image.md).

    Какой бы метод вы использовали для загрузки в DaRT, необходимо включить загрузочное устройство в BIOS для варианта загрузки или параметров, которые должны быть доступны для конечного пользователя.

    **Примечание.**  
    Настройка BIOS является уникальной в зависимости от типа жесткого диска, сетевых адаптеров и другого оборудования, которое используется в Организации.



~~~
As the computer is booting into the DaRT recovery image, the **NetStart** dialog box appears.
~~~

2. Когда появится вопрос о том, нужно ли инициализировать сетевые службы, выберите один из указанных ниже вариантов.

   **Да** , предполагается, что в сети есть DHCP-сервер, и делается попытка получить IP-адрес с сервера. Если в сети вместо DHCP используются статические IP-адреса, вы можете позже воспользоваться средством **настройки TCP/IP** в DART, чтобы указать статический IP-адрес.

   **Нет** -пропускать процесс инициализации сети.

3. Укажите, нужно ли переназначить буквы дисков. При запуске Windows Online системный том обычно отображается на диске C. Однако при запуске Windows в автономном режиме в среде WinRE исходный системный том может быть сопоставлен с другим диском, и это может привести к путанице. Если вы решили выполнить повторное сопоставление, DaRT попытается сопоставить буквы для автономного диска с буквами, заданными в сети. Повторное сопоставление выполняется только в том случае, если в процессе запуска выбрана автономная операционная система.

4. В диалоговом окне " **Параметры восстановления системы** " выберите раскладку клавиатуры.

5. Проверьте отображаемый корневой каталог системы, версию операционной системы и размер раздела. Если вы не видите указанную в списке операционную систему и подозреваете, что причиной сбоя является отсутствующий драйвер, нажмите **загрузить драйверы** для загрузки подозрительных драйверов, а затем вставьте установочный носитель для устройства и выберите драйвер.

6. Выберите установку, которую вы хотите восстановить или диагностировать, и нажмите кнопку **Далее**.

   **Примечание.**  
   Если среда восстановления Windows (WinRE) обнаруживает или подозреваете, что Windows 10 не запускается надлежащим образом в прошлый раз, программа **восстановления запуска** может начать выполняться автоматически. Сведения о том, как устранить эту проблему, вы можете найти в разделе [Устранение неполадок DaRT 10](troubleshooting-dart-10.md).



~~~
If any of the registry hives are corrupted or missing, Registry Editor and several other DaRT utilities will have limited functionality. If no operating system is selected, some tools will not be available.

The **System Recovery Options** window appears and lists various recovery tools.
~~~

7. В окне **Параметры восстановления системы** выберите набор **средств диагностики и восстановления Microsoft** , чтобы открыть **набор средств диагностики и восстановления**.

8. В окне **Инструменты Диагностика и восстановление** щелкните **удаленное подключение** , чтобы открыть окно **удаленного подключения DART** . Если вам будет предложено предоставить службе поддержки удаленный доступ, нажмите кнопку **ОК**.

   Откроется окно с удаленным подключением DaRT, в котором отображается номер билета, IP-адрес и сведения о порте.

9. На компьютере службы поддержки откройте **средство просмотра удаленных подключений DART**.

10. Нажмите кнопку **Пуск**, выберите **все программы**, а затем — **Microsoft DART 10**, а затем — **средство просмотра удаленных подключений для DART**.

11. В окне **удаленного подключения DART** введите необходимый билет, IP-адрес и сведения о порте.

   **Примечание.**  
   Эти сведения создаются на компьютере пользователя и должны быть предоставлены конечным пользователем. Возможно, вы можете выбрать несколько IP-адресов, в зависимости от того, сколько доступно на компьютере конечного пользователя.



12. Нажмите кнопку **Подключить**.

Теперь ИТ-администратор может управлять компьютером конечного пользователя и удаленно запускать инструменты DaRT.

**Примечание.**  
Файл с именем inv32.xml и содержит сведения об удаленном подключении, такие как номер порта и IP-адрес. По умолчанию файл обычно размещается по адресу%windir%\\system32.



**Настройка процесса удаленного подключения**

1. Вы можете настроить процесс удаленного подключения, изменив файл winpeshl.ini. Дополнительные сведения о том, как изменить winpeshl.ini файл, можно найти в разделе [Winpeshl.ini файлы](https://go.microsoft.com/fwlink/?LinkId=219413).

   Укажите указанные ниже команды и параметры, чтобы настроить способ установки удаленного подключения для конечного пользователя.

   <table>
   <colgroup>
   <col width="33%" />
   <col width="33%" />
   <col width="33%" />
   </colgroup>
   <thead>
   <tr class="header">
   <th align="left">Команда</th>
   <th align="left">Параметр</th>
   <th align="left">Описание</th>
   </tr>
   </thead>
   <tbody>
   <tr class="odd">
   <td align="left"><p><strong>RemoteRecovery.exe</strong></p></td>
   <td align="left"><p>-е сообщение</p></td>
   <td align="left"><p>Указывает, что запрос подтверждения не отображается. <strong>Удаленное соединение </strong> продолжится так, как будто конечный пользователь &quot; ответил &quot; на запрос подтверждения.</p></td>
   </tr>
   <tr class="even">
   <td align="left"><p><strong>WaitForConnection.exe</strong></p></td>
   <td align="left"><p>нет</p></td>
   <td align="left"><p>Предотвращает продолжение настраиваемого сценария, пока <strong> </strong> не будет запущено удаленное подключение или не будет установлено действующее соединение с конечным компьютером пользователя.</p>
   <div class="alert">
   <strong>Важно.</strong><br/><p>Эта команда не выполняет никаких функций, если она указана независимо друг от друга. Он должен быть указан в сценарии для правильной работы.</p>
   </div>
   <div>

   </div></td>
   </tr>
   </tbody>
   </table>



2. Ниже приведен пример файла winpeshl.ini, который настроен таким образом, чтобы открыть средство **удаленного подключения** , как только вы попытаетесь загрузить DART:

   ```ini
   [LaunchApps]
   "%windir%\system32\netstart.exe -network -remount"
   "cmd /C start %windir%\system32\RemoteRecovery.exe -nomessage"
   "%windir%\system32\WaitForConnection.exe"
   "%SYSTEMDRIVE%\sources\recovery\recenv.exe"
   ```

При запуске DaRT создается файл inv32.xml в \\Windows\\System32\\ на ЭЛЕКТРОНном диске. Этот файл имеет сведения о подключении: IP-адрес, порт и номер билета. Вы можете скопировать этот файл в общую сетевую информацию, чтобы активировать рабочий процесс службы поддержки. Например, настраиваемая программа может проверить сетевую почту для файлов подключения, а затем создать билет поддержки или отправить уведомления по электронной почте.

**Запуск средства просмотра удаленных подключений из командной строки**

1.  Чтобы запустить **средство просмотра удаленной связи** с помощью DaRT в командной строке, укажите команду **DartRemoteViewer.exe** и используйте указанные ниже параметры.

    <table>
    <colgroup>
    <col width="50%" />
    <col width="50%" />
    </colgroup>
    <thead>
    <tr class="header">
    <th align="left">Параметр</th>
    <th align="left">Описание</th>
    </tr>
    </thead>
    <tbody>
    <tr class="odd">
    <td align="left"><p>-билета = &lt; <em> ticketnumber</em>&gt;</p></td>
    <td align="left"><p>Где &lt; <em> ticketnumber </em> &gt; — номер билета, включая тире, которое генерируется удаленным соединением.</p></td>
    </tr>
    <tr class="even">
    <td align="left"><p>-IPAddress = &lt; <em> IPAddress</em>&gt;</p></td>
    <td align="left"><p>&lt; <em> </em> &gt; IP-адрес, который генерируется удаленным подключением, где IPAddress.</p></td>
    </tr>
    <tr class="odd">
    <td align="left"><p>-Port = &lt; <em> Port (порт)</em>&gt;</p></td>
    <td align="left"><p>Если &lt; <em> Port (порт) </em> &gt; — порт, соответствующий указанному IP-адресу.</p></td>
    </tr>
    </tbody>
    </table>



~~~
**Note**  
The variables for these parameters are created on the end-user computer and must be provided by the end user.
~~~



2. Если указаны все три параметра и данные являются допустимыми, при запуске программы немедленно исключается соединение. Если какой – либо параметр является недопустимым, программа запускается так, как если бы не были указаны параметры.

## Статьи по теме


[Операции DaRT 10](operations-for-dart-10.md)

[Восстановление компьютеров с помощью DaRT 10](recovering-computers-using-dart-10.md)









